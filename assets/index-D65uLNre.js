(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();function Dn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const G={},Rt=[],Be=()=>{},cr=()=>!1,Hs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ln=e=>e.startsWith("onUpdate:"),ue=Object.assign,Fn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},el=Object.prototype.hasOwnProperty,B=(e,t)=>el.call(e,t),N=Array.isArray,Nt=e=>us(e)==="[object Map]",Vs=e=>us(e)==="[object Set]",bo=e=>us(e)==="[object Date]",q=e=>typeof e=="function",ne=e=>typeof e=="string",Ue=e=>typeof e=="symbol",J=e=>e!==null&&typeof e=="object",fr=e=>(J(e)||q(e))&&q(e.then)&&q(e.catch),ur=Object.prototype.toString,us=e=>ur.call(e),tl=e=>us(e).slice(8,-1),hr=e=>us(e)==="[object Object]",Kn=e=>ne(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zt=Dn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bs=e=>{const t=Object.create(null);return(s=>t[s]||(t[s]=e(s)))},sl=/-\w/g,ht=Bs(e=>e.replace(sl,t=>t.slice(1).toUpperCase())),nl=/\B([A-Z])/g,Mt=Bs(e=>e.replace(nl,"-$1").toLowerCase()),dr=Bs(e=>e.charAt(0).toUpperCase()+e.slice(1)),tn=Bs(e=>e?`on${dr(e)}`:""),ut=(e,t)=>!Object.is(e,t),xs=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},pr=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},gr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let vo;const Ws=()=>vo||(vo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qn(e){if(N(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=ne(n)?ll(n):qn(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(ne(e)||J(e))return e}const ol=/;(?![^(]*\))/g,rl=/:([^]+)/,il=/\/\*[^]*?\*\//g;function ll(e){const t={};return e.replace(il,"").split(ol).forEach(s=>{if(s){const n=s.split(rl);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function hs(e){let t="";if(ne(e))t=e;else if(N(e))for(let s=0;s<e.length;s++){const n=hs(e[s]);n&&(t+=n+" ")}else if(J(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const al="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cl=Dn(al);function mr(e){return!!e||e===""}function fl(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Us(e[n],t[n]);return s}function Us(e,t){if(e===t)return!0;let s=bo(e),n=bo(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Ue(e),n=Ue(t),s||n)return e===t;if(s=N(e),n=N(t),s||n)return s&&n?fl(e,t):!1;if(s=J(e),n=J(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const i in e){const l=e.hasOwnProperty(i),a=t.hasOwnProperty(i);if(l&&!a||!l&&a||!Us(e[i],t[i]))return!1}}return String(e)===String(t)}function ul(e,t){return e.findIndex(s=>Us(s,t))}const br=e=>!!(e&&e.__v_isRef===!0),vr=e=>ne(e)?e:e==null?"":N(e)||J(e)&&(e.toString===ur||!q(e.toString))?br(e)?vr(e.value):JSON.stringify(e,_r,2):String(e),_r=(e,t)=>br(t)?_r(e,t.value):Nt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[sn(n,r)+" =>"]=o,s),{})}:Vs(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>sn(s))}:Ue(t)?sn(t):J(t)&&!N(t)&&!hr(t)?String(t):t,sn=(e,t="")=>{var s;return Ue(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};let _e;class hl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_e,!t&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=_e;try{return _e=this,t()}finally{_e=s}}}on(){++this._on===1&&(this.prevScope=_e,_e=this)}off(){this._on>0&&--this._on===0&&(_e=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function dl(){return _e}let Y;const nn=new WeakSet;class yr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_e&&_e.active&&_e.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nn.has(this)&&(nn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Sr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_o(this),Cr(this);const t=Y,s=Ne;Y=this,Ne=!0;try{return this.fn()}finally{xr(this),Y=t,Ne=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Hn(t);this.deps=this.depsTail=void 0,_o(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_n(this)&&this.run()}get dirty(){return _n(this)}}let wr=0,Yt,Jt;function Sr(e,t=!1){if(e.flags|=8,t){e.next=Jt,Jt=e;return}e.next=Yt,Yt=e}function $n(){wr++}function jn(){if(--wr>0)return;if(Jt){let t=Jt;for(Jt=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Yt;){let t=Yt;for(Yt=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Cr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xr(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Hn(n),pl(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function _n(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Er(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Er(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ss)||(e.globalVersion=ss,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!_n(e))))return;e.flags|=2;const t=e.dep,s=Y,n=Ne;Y=e,Ne=!0;try{Cr(e);const o=e.fn(e._value);(t.version===0||ut(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Y=s,Ne=n,xr(e),e.flags&=-3}}function Hn(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Hn(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function pl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ne=!0;const kr=[];function et(){kr.push(Ne),Ne=!1}function tt(){const e=kr.pop();Ne=e===void 0?!0:e}function _o(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Y;Y=void 0;try{t()}finally{Y=s}}}let ss=0;class gl{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Y||!Ne||Y===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Y)s=this.activeLink=new gl(Y,this),Y.deps?(s.prevDep=Y.depsTail,Y.depsTail.nextDep=s,Y.depsTail=s):Y.deps=Y.depsTail=s,Pr(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Y.depsTail,s.nextDep=void 0,Y.depsTail.nextDep=s,Y.depsTail=s,Y.deps===s&&(Y.deps=n)}return s}trigger(t){this.version++,ss++,this.notify(t)}notify(t){$n();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{jn()}}}function Pr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Pr(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const yn=new WeakMap,St=Symbol(""),wn=Symbol(""),ns=Symbol("");function ce(e,t,s){if(Ne&&Y){let n=yn.get(e);n||yn.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Vn),o.map=n,o.key=s),o.track()}}function Je(e,t,s,n,o,r){const i=yn.get(e);if(!i){ss++;return}const l=a=>{a&&a.trigger()};if($n(),t==="clear")i.forEach(l);else{const a=N(e),c=a&&Kn(s);if(a&&s==="length"){const f=Number(n);i.forEach((d,p)=>{(p==="length"||p===ns||!Ue(p)&&p>=f)&&l(d)})}else switch((s!==void 0||i.has(void 0))&&l(i.get(s)),c&&l(i.get(ns)),t){case"add":a?c&&l(i.get("length")):(l(i.get(St)),Nt(e)&&l(i.get(wn)));break;case"delete":a||(l(i.get(St)),Nt(e)&&l(i.get(wn)));break;case"set":Nt(e)&&l(i.get(St));break}}jn()}function Ot(e){const t=V(e);return t===e?t:(ce(t,"iterate",ns),Oe(e)?t:t.map(De))}function Gs(e){return ce(e=V(e),"iterate",ns),e}function lt(e,t){return st(e)?Ct(e)?Ft(De(t)):Ft(t):De(t)}const ml={__proto__:null,[Symbol.iterator](){return on(this,Symbol.iterator,e=>lt(this,e))},concat(...e){return Ot(this).concat(...e.map(t=>N(t)?Ot(t):t))},entries(){return on(this,"entries",e=>(e[1]=lt(this,e[1]),e))},every(e,t){return Qe(this,"every",e,t,void 0,arguments)},filter(e,t){return Qe(this,"filter",e,t,s=>s.map(n=>lt(this,n)),arguments)},find(e,t){return Qe(this,"find",e,t,s=>lt(this,s),arguments)},findIndex(e,t){return Qe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Qe(this,"findLast",e,t,s=>lt(this,s),arguments)},findLastIndex(e,t){return Qe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Qe(this,"forEach",e,t,void 0,arguments)},includes(...e){return rn(this,"includes",e)},indexOf(...e){return rn(this,"indexOf",e)},join(e){return Ot(this).join(e)},lastIndexOf(...e){return rn(this,"lastIndexOf",e)},map(e,t){return Qe(this,"map",e,t,void 0,arguments)},pop(){return Ht(this,"pop")},push(...e){return Ht(this,"push",e)},reduce(e,...t){return yo(this,"reduce",e,t)},reduceRight(e,...t){return yo(this,"reduceRight",e,t)},shift(){return Ht(this,"shift")},some(e,t){return Qe(this,"some",e,t,void 0,arguments)},splice(...e){return Ht(this,"splice",e)},toReversed(){return Ot(this).toReversed()},toSorted(e){return Ot(this).toSorted(e)},toSpliced(...e){return Ot(this).toSpliced(...e)},unshift(...e){return Ht(this,"unshift",e)},values(){return on(this,"values",e=>lt(this,e))}};function on(e,t,s){const n=Gs(e),o=n[t]();return n!==e&&!Oe(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const bl=Array.prototype;function Qe(e,t,s,n,o,r){const i=Gs(e),l=i!==e&&!Oe(e),a=i[t];if(a!==bl[t]){const d=a.apply(e,r);return l?De(d):d}let c=s;i!==e&&(l?c=function(d,p){return s.call(this,lt(e,d),p,e)}:s.length>2&&(c=function(d,p){return s.call(this,d,p,e)}));const f=a.call(i,c,n);return l&&o?o(f):f}function yo(e,t,s,n){const o=Gs(e);let r=s;return o!==e&&(Oe(e)?s.length>3&&(r=function(i,l,a){return s.call(this,i,l,a,e)}):r=function(i,l,a){return s.call(this,i,lt(e,l),a,e)}),o[t](r,...n)}function rn(e,t,s){const n=V(e);ce(n,"iterate",ns);const o=n[t](...s);return(o===-1||o===!1)&&Un(s[0])?(s[0]=V(s[0]),n[t](...s)):o}function Ht(e,t,s=[]){et(),$n();const n=V(e)[t].apply(e,s);return jn(),tt(),n}const vl=Dn("__proto__,__v_isRef,__isVue"),Mr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ue));function _l(e){Ue(e)||(e=String(e));const t=V(this);return ce(t,"has",e),t.hasOwnProperty(e)}class Tr{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?Tl:Rr:r?Ir:Or).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const i=N(t);if(!o){let a;if(i&&(a=ml[s]))return a;if(s==="hasOwnProperty")return _l}const l=Reflect.get(t,s,fe(t)?t:n);if((Ue(s)?Mr.has(s):vl(s))||(o||ce(t,"get",s),r))return l;if(fe(l)){const a=i&&Kn(s)?l:l.value;return o&&J(a)?Cn(a):a}return J(l)?o?Cn(l):Et(l):l}}class Ar extends Tr{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];const i=N(t)&&Kn(s);if(!this._isShallow){const c=st(r);if(!Oe(n)&&!st(n)&&(r=V(r),n=V(n)),!i&&fe(r)&&!fe(n))return c||(r.value=n),!0}const l=i?Number(s)<t.length:B(t,s),a=Reflect.set(t,s,n,fe(t)?t:o);return t===V(o)&&(l?ut(n,r)&&Je(t,"set",s,n):Je(t,"add",s,n)),a}deleteProperty(t,s){const n=B(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Je(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Ue(s)||!Mr.has(s))&&ce(t,"has",s),n}ownKeys(t){return ce(t,"iterate",N(t)?"length":St),Reflect.ownKeys(t)}}class yl extends Tr{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const wl=new Ar,Sl=new yl,Cl=new Ar(!0);const Sn=e=>e,_s=e=>Reflect.getPrototypeOf(e);function xl(e,t,s){return function(...n){const o=this.__v_raw,r=V(o),i=Nt(r),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=o[e](...n),f=s?Sn:t?Ft:De;return!t&&ce(r,"iterate",a?wn:St),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:l?[f(d[0]),f(d[1])]:f(d),done:p}},[Symbol.iterator](){return this}}}}function ys(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function El(e,t){const s={get(o){const r=this.__v_raw,i=V(r),l=V(o);e||(ut(o,l)&&ce(i,"get",o),ce(i,"get",l));const{has:a}=_s(i),c=t?Sn:e?Ft:De;if(a.call(i,o))return c(r.get(o));if(a.call(i,l))return c(r.get(l));r!==i&&r.get(o)},get size(){const o=this.__v_raw;return!e&&ce(V(o),"iterate",St),o.size},has(o){const r=this.__v_raw,i=V(r),l=V(o);return e||(ut(o,l)&&ce(i,"has",o),ce(i,"has",l)),o===l?r.has(o):r.has(o)||r.has(l)},forEach(o,r){const i=this,l=i.__v_raw,a=V(l),c=t?Sn:e?Ft:De;return!e&&ce(a,"iterate",St),l.forEach((f,d)=>o.call(r,c(f),c(d),i))}};return ue(s,e?{add:ys("add"),set:ys("set"),delete:ys("delete"),clear:ys("clear")}:{add(o){!t&&!Oe(o)&&!st(o)&&(o=V(o));const r=V(this);return _s(r).has.call(r,o)||(r.add(o),Je(r,"add",o,o)),this},set(o,r){!t&&!Oe(r)&&!st(r)&&(r=V(r));const i=V(this),{has:l,get:a}=_s(i);let c=l.call(i,o);c||(o=V(o),c=l.call(i,o));const f=a.call(i,o);return i.set(o,r),c?ut(r,f)&&Je(i,"set",o,r):Je(i,"add",o,r),this},delete(o){const r=V(this),{has:i,get:l}=_s(r);let a=i.call(r,o);a||(o=V(o),a=i.call(r,o)),l&&l.call(r,o);const c=r.delete(o);return a&&Je(r,"delete",o,void 0),c},clear(){const o=V(this),r=o.size!==0,i=o.clear();return r&&Je(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=xl(o,e,t)}),s}function Bn(e,t){const s=El(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(B(s,o)&&o in n?s:n,o,r)}const kl={get:Bn(!1,!1)},Pl={get:Bn(!1,!0)},Ml={get:Bn(!0,!1)};const Or=new WeakMap,Ir=new WeakMap,Rr=new WeakMap,Tl=new WeakMap;function Al(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ol(e){return e.__v_skip||!Object.isExtensible(e)?0:Al(tl(e))}function Et(e){return st(e)?e:Wn(e,!1,wl,kl,Or)}function Il(e){return Wn(e,!1,Cl,Pl,Ir)}function Cn(e){return Wn(e,!0,Sl,Ml,Rr)}function Wn(e,t,s,n,o){if(!J(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ol(e);if(r===0)return e;const i=o.get(e);if(i)return i;const l=new Proxy(e,r===2?n:s);return o.set(e,l),l}function Ct(e){return st(e)?Ct(e.__v_raw):!!(e&&e.__v_isReactive)}function st(e){return!!(e&&e.__v_isReadonly)}function Oe(e){return!!(e&&e.__v_isShallow)}function Un(e){return e?!!e.__v_raw:!1}function V(e){const t=e&&e.__v_raw;return t?V(t):e}function Rl(e){return!B(e,"__v_skip")&&Object.isExtensible(e)&&pr(e,"__v_skip",!0),e}const De=e=>J(e)?Et(e):e,Ft=e=>J(e)?Cn(e):e;function fe(e){return e?e.__v_isRef===!0:!1}function Es(e){return Nl(e,!1)}function Nl(e,t){return fe(e)?e:new Dl(e,t)}class Dl{constructor(t,s){this.dep=new Vn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:V(t),this._value=s?t:De(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Oe(t)||st(t);t=n?t:V(t),ut(t,s)&&(this._rawValue=t,this._value=n?t:De(t),this.dep.trigger())}}function Nr(e){return fe(e)?e.value:e}const Ll={get:(e,t,s)=>t==="__v_raw"?e:Nr(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return fe(o)&&!fe(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Dr(e){return Ct(e)?e:new Proxy(e,Ll)}class Fl{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Vn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Y!==this)return Sr(this,!0),!0}get value(){const t=this.dep.track();return Er(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Kl(e,t,s=!1){let n,o;return q(e)?n=e:(n=e.get,o=e.set),new Fl(n,o,s)}const ws={},Os=new WeakMap;let yt;function ql(e,t=!1,s=yt){if(s){let n=Os.get(s);n||Os.set(s,n=[]),n.push(e)}}function $l(e,t,s=G){const{immediate:n,deep:o,once:r,scheduler:i,augmentJob:l,call:a}=s,c=T=>o?T:Oe(T)||o===!1||o===0?Ze(T,1):Ze(T);let f,d,p,g,b=!1,v=!1;if(fe(e)?(d=()=>e.value,b=Oe(e)):Ct(e)?(d=()=>c(e),b=!0):N(e)?(v=!0,b=e.some(T=>Ct(T)||Oe(T)),d=()=>e.map(T=>{if(fe(T))return T.value;if(Ct(T))return c(T);if(q(T))return a?a(T,2):T()})):q(e)?t?d=a?()=>a(e,2):e:d=()=>{if(p){et();try{p()}finally{tt()}}const T=yt;yt=f;try{return a?a(e,3,[g]):e(g)}finally{yt=T}}:d=Be,t&&o){const T=d,j=o===!0?1/0:o;d=()=>Ze(T(),j)}const A=dl(),E=()=>{f.stop(),A&&A.active&&Fn(A.effects,f)};if(r&&t){const T=t;t=(...j)=>{T(...j),E()}}let C=v?new Array(e.length).fill(ws):ws;const D=T=>{if(!(!(f.flags&1)||!f.dirty&&!T))if(t){const j=f.run();if(o||b||(v?j.some((le,F)=>ut(le,C[F])):ut(j,C))){p&&p();const le=yt;yt=f;try{const F=[j,C===ws?void 0:v&&C[0]===ws?[]:C,g];C=j,a?a(t,3,F):t(...F)}finally{yt=le}}}else f.run()};return l&&l(D),f=new yr(d),f.scheduler=i?()=>i(D,!1):D,g=T=>ql(T,!1,f),p=f.onStop=()=>{const T=Os.get(f);if(T){if(a)a(T,4);else for(const j of T)j();Os.delete(f)}},t?n?D(!0):C=f.run():i?i(D.bind(null,!0),!0):f.run(),E.pause=f.pause.bind(f),E.resume=f.resume.bind(f),E.stop=E,E}function Ze(e,t=1/0,s){if(t<=0||!J(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,fe(e))Ze(e.value,t,s);else if(N(e))for(let n=0;n<e.length;n++)Ze(e[n],t,s);else if(Vs(e)||Nt(e))e.forEach(n=>{Ze(n,t,s)});else if(hr(e)){for(const n in e)Ze(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ze(e[n],t,s)}return e}function ds(e,t,s,n){try{return n?e(...n):e()}catch(o){Qs(o,t,s)}}function Ge(e,t,s,n){if(q(e)){const o=ds(e,t,s,n);return o&&fr(o)&&o.catch(r=>{Qs(r,t,s)}),o}if(N(e)){const o=[];for(let r=0;r<e.length;r++)o.push(Ge(e[r],t,s,n));return o}}function Qs(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||G;if(t){let l=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const f=l.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,a,c)===!1)return}l=l.parent}if(r){et(),ds(r,null,10,[e,a,c]),tt();return}}jl(e,s,o,n,i)}function jl(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const pe=[];let je=-1;const Dt=[];let at=null,It=0;const Lr=Promise.resolve();let Is=null;function Gn(e){const t=Is||Lr;return e?t.then(this?e.bind(this):e):t}function Hl(e){let t=je+1,s=pe.length;for(;t<s;){const n=t+s>>>1,o=pe[n],r=os(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function Qn(e){if(!(e.flags&1)){const t=os(e),s=pe[pe.length-1];!s||!(e.flags&2)&&t>=os(s)?pe.push(e):pe.splice(Hl(t),0,e),e.flags|=1,Fr()}}function Fr(){Is||(Is=Lr.then(qr))}function Vl(e){N(e)?Dt.push(...e):at&&e.id===-1?at.splice(It+1,0,e):e.flags&1||(Dt.push(e),e.flags|=1),Fr()}function wo(e,t,s=je+1){for(;s<pe.length;s++){const n=pe[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;pe.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Kr(e){if(Dt.length){const t=[...new Set(Dt)].sort((s,n)=>os(s)-os(n));if(Dt.length=0,at){at.push(...t);return}for(at=t,It=0;It<at.length;It++){const s=at[It];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}at=null,It=0}}const os=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qr(e){try{for(je=0;je<pe.length;je++){const t=pe[je];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ds(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;je<pe.length;je++){const t=pe[je];t&&(t.flags&=-2)}je=-1,pe.length=0,Kr(),Is=null,(pe.length||Dt.length)&&qr()}}let Ae=null,$r=null;function Rs(e){const t=Ae;return Ae=e,$r=e&&e.type.__scopeId||null,t}function Bl(e,t=Ae,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Io(-1);const r=Rs(t);let i;try{i=e(...o)}finally{Rs(r),n._d&&Io(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function So(e,t){if(Ae===null)return e;const s=Zs(Ae),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,i,l,a=G]=t[o];r&&(q(r)&&(r={mounted:r,updated:r}),r.deep&&Ze(i),n.push({dir:r,instance:s,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function vt(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const l=o[i];r&&(l.oldValue=r[i].value);let a=l.dir[n];a&&(et(),Ge(a,s,8,[e.el,l,e,t]),tt())}}const Wl=Symbol("_vte"),Ul=e=>e.__isTeleport,Gl=Symbol("_leaveCb");function zn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,zn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function jr(e,t){return q(e)?ue({name:e.name},t,{setup:e}):e}function Hr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ns=new WeakMap;function Zt(e,t,s,n,o=!1){if(N(e)){e.forEach((b,v)=>Zt(b,t&&(N(t)?t[v]:t),s,n,o));return}if(Xt(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Zt(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?Zs(n.component):n.el,i=o?null:r,{i:l,r:a}=e,c=t&&t.r,f=l.refs===G?l.refs={}:l.refs,d=l.setupState,p=V(d),g=d===G?cr:b=>B(p,b);if(c!=null&&c!==a){if(Co(t),ne(c))f[c]=null,g(c)&&(d[c]=null);else if(fe(c)){c.value=null;const b=t;b.k&&(f[b.k]=null)}}if(q(a))ds(a,l,12,[i,f]);else{const b=ne(a),v=fe(a);if(b||v){const A=()=>{if(e.f){const E=b?g(a)?d[a]:f[a]:a.value;if(o)N(E)&&Fn(E,r);else if(N(E))E.includes(r)||E.push(r);else if(b)f[a]=[r],g(a)&&(d[a]=f[a]);else{const C=[r];a.value=C,e.k&&(f[e.k]=C)}}else b?(f[a]=i,g(a)&&(d[a]=i)):v&&(a.value=i,e.k&&(f[e.k]=i))};if(i){const E=()=>{A(),Ns.delete(e)};E.id=-1,Ns.set(e,E),xe(E,s)}else Co(e),A()}}}function Co(e){const t=Ns.get(e);t&&(t.flags|=8,Ns.delete(e))}Ws().requestIdleCallback;Ws().cancelIdleCallback;const Xt=e=>!!e.type.__asyncLoader,Vr=e=>e.type.__isKeepAlive;function Ql(e,t){Br(e,"a",t)}function zl(e,t){Br(e,"da",t)}function Br(e,t,s=ge){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(zs(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Vr(o.parent.vnode)&&Yl(n,t,s,o),o=o.parent}}function Yl(e,t,s,n){const o=zs(t,e,n,!0);Ur(()=>{Fn(n[t],o)},s)}function zs(e,t,s=ge,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...i)=>{et();const l=ps(s),a=Ge(t,s,e,i);return l(),tt(),a});return n?o.unshift(r):o.push(r),r}}const nt=e=>(t,s=ge)=>{(!ls||e==="sp")&&zs(e,(...n)=>t(...n),s)},Jl=nt("bm"),Wr=nt("m"),Zl=nt("bu"),Xl=nt("u"),ea=nt("bum"),Ur=nt("um"),ta=nt("sp"),sa=nt("rtg"),na=nt("rtc");function oa(e,t=ge){zs("ec",e,t)}const ra=Symbol.for("v-ndc");function Gr(e,t,s,n){let o;const r=s,i=N(e);if(i||ne(e)){const l=i&&Ct(e);let a=!1,c=!1;l&&(a=!Oe(e),c=st(e),e=Gs(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(a?c?Ft(De(e[f])):De(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r)}else if(J(e))if(e[Symbol.iterator])o=Array.from(e,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(e);o=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const f=l[a];o[a]=t(e[f],f,a,r)}}else o=[];return o}const xn=e=>e?gi(e)?Zs(e):xn(e.parent):null,es=ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xn(e.parent),$root:e=>xn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zr(e),$forceUpdate:e=>e.f||(e.f=()=>{Qn(e.update)}),$nextTick:e=>e.n||(e.n=Gn.bind(e.proxy)),$watch:e=>ba.bind(e)}),ln=(e,t)=>e!==G&&!e.__isScriptSetup&&B(e,t),ia={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:i,type:l,appContext:a}=e;if(t[0]!=="$"){const p=i[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(ln(n,t))return i[t]=1,n[t];if(o!==G&&B(o,t))return i[t]=2,o[t];if(B(r,t))return i[t]=3,r[t];if(s!==G&&B(s,t))return i[t]=4,s[t];En&&(i[t]=0)}}const c=es[t];let f,d;if(c)return t==="$attrs"&&ce(e.attrs,"get",""),c(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(s!==G&&B(s,t))return i[t]=4,s[t];if(d=a.config.globalProperties,B(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return ln(o,t)?(o[t]=s,!0):n!==G&&B(n,t)?(n[t]=s,!0):B(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:r,type:i}},l){let a;return!!(s[l]||e!==G&&l[0]!=="$"&&B(e,l)||ln(t,l)||B(r,l)||B(n,l)||B(es,l)||B(o.config.globalProperties,l)||(a=i.__cssModules)&&a[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:B(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function xo(e){return N(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let En=!0;function la(e){const t=zr(e),s=e.proxy,n=e.ctx;En=!1,t.beforeCreate&&Eo(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:l,provide:a,inject:c,created:f,beforeMount:d,mounted:p,beforeUpdate:g,updated:b,activated:v,deactivated:A,beforeDestroy:E,beforeUnmount:C,destroyed:D,unmounted:T,render:j,renderTracked:le,renderTriggered:F,errorCaptured:O,serverPrefetch:U,expose:Z,inheritAttrs:se,components:Pe,directives:ms,filters:Xs}=t;if(c&&aa(c,n,null),i)for(const X in i){const Q=i[X];q(Q)&&(n[X]=Q.bind(s))}if(o){const X=o.call(s,s);J(X)&&(e.data=Et(X))}if(En=!0,r)for(const X in r){const Q=r[X],mt=q(Q)?Q.bind(s,s):q(Q.get)?Q.get.bind(s,s):Be,bs=!q(Q)&&q(Q.set)?Q.set.bind(s):Be,bt=Ja({get:mt,set:bs});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>bt.value,set:Le=>bt.value=Le})}if(l)for(const X in l)Qr(l[X],n,s,X);if(a){const X=q(a)?a.call(s):a;Reflect.ownKeys(X).forEach(Q=>{pa(Q,X[Q])})}f&&Eo(f,e,"c");function he(X,Q){N(Q)?Q.forEach(mt=>X(mt.bind(s))):Q&&X(Q.bind(s))}if(he(Jl,d),he(Wr,p),he(Zl,g),he(Xl,b),he(Ql,v),he(zl,A),he(oa,O),he(na,le),he(sa,F),he(ea,C),he(Ur,T),he(ta,U),N(Z))if(Z.length){const X=e.exposed||(e.exposed={});Z.forEach(Q=>{Object.defineProperty(X,Q,{get:()=>s[Q],set:mt=>s[Q]=mt,enumerable:!0})})}else e.exposed||(e.exposed={});j&&e.render===Be&&(e.render=j),se!=null&&(e.inheritAttrs=se),Pe&&(e.components=Pe),ms&&(e.directives=ms),U&&Hr(e)}function aa(e,t,s=Be){N(e)&&(e=kn(e));for(const n in e){const o=e[n];let r;J(o)?"default"in o?r=ks(o.from||n,o.default,!0):r=ks(o.from||n):r=ks(o),fe(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[n]=r}}function Eo(e,t,s){Ge(N(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Qr(e,t,s,n){let o=n.includes(".")?Zr(s,n):()=>s[n];if(ne(e)){const r=t[e];q(r)&&Ps(o,r)}else if(q(e))Ps(o,e.bind(s));else if(J(e))if(N(e))e.forEach(r=>Qr(r,t,s,n));else{const r=q(e.handler)?e.handler.bind(s):t[e.handler];q(r)&&Ps(o,r,e)}}function zr(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,l=r.get(t);let a;return l?a=l:!o.length&&!s&&!n?a=t:(a={},o.length&&o.forEach(c=>Ds(a,c,i,!0)),Ds(a,t,i)),J(t)&&r.set(t,a),a}function Ds(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&Ds(e,r,s,!0),o&&o.forEach(i=>Ds(e,i,s,!0));for(const i in t)if(!(n&&i==="expose")){const l=ca[i]||s&&s[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const ca={data:ko,props:Po,emits:Po,methods:Gt,computed:Gt,beforeCreate:de,created:de,beforeMount:de,mounted:de,beforeUpdate:de,updated:de,beforeDestroy:de,beforeUnmount:de,destroyed:de,unmounted:de,activated:de,deactivated:de,errorCaptured:de,serverPrefetch:de,components:Gt,directives:Gt,watch:ua,provide:ko,inject:fa};function ko(e,t){return t?e?function(){return ue(q(e)?e.call(this,this):e,q(t)?t.call(this,this):t)}:t:e}function fa(e,t){return Gt(kn(e),kn(t))}function kn(e){if(N(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function de(e,t){return e?[...new Set([].concat(e,t))]:t}function Gt(e,t){return e?ue(Object.create(null),e,t):t}function Po(e,t){return e?N(e)&&N(t)?[...new Set([...e,...t])]:ue(Object.create(null),xo(e),xo(t??{})):t}function ua(e,t){if(!e)return t;if(!t)return e;const s=ue(Object.create(null),e);for(const n in t)s[n]=de(e[n],t[n]);return s}function Yr(){return{app:null,config:{isNativeTag:cr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ha=0;function da(e,t){return function(n,o=null){q(n)||(n=ue({},n)),o!=null&&!J(o)&&(o=null);const r=Yr(),i=new WeakSet,l=[];let a=!1;const c=r.app={_uid:ha++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:Za,get config(){return r.config},set config(f){},use(f,...d){return i.has(f)||(f&&q(f.install)?(i.add(f),f.install(c,...d)):q(f)&&(i.add(f),f(c,...d))),c},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),c},component(f,d){return d?(r.components[f]=d,c):r.components[f]},directive(f,d){return d?(r.directives[f]=d,c):r.directives[f]},mount(f,d,p){if(!a){const g=c._ceVNode||We(n,o);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(g,f,p),a=!0,c._container=f,f.__vue_app__=c,Zs(g.component)}},onUnmount(f){l.push(f)},unmount(){a&&(Ge(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,d){return r.provides[f]=d,c},runWithContext(f){const d=Lt;Lt=c;try{return f()}finally{Lt=d}}};return c}}let Lt=null;function pa(e,t){if(ge){let s=ge.provides;const n=ge.parent&&ge.parent.provides;n===s&&(s=ge.provides=Object.create(n)),s[e]=t}}function ks(e,t,s=!1){const n=Wa();if(n||Lt){let o=Lt?Lt._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&q(t)?t.call(n&&n.proxy):t}}const ga=Symbol.for("v-scx"),ma=()=>ks(ga);function Ps(e,t,s){return Jr(e,t,s)}function Jr(e,t,s=G){const{immediate:n,deep:o,flush:r,once:i}=s,l=ue({},s),a=t&&n||!t&&r!=="post";let c;if(ls){if(r==="sync"){const g=ma();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!a){const g=()=>{};return g.stop=Be,g.resume=Be,g.pause=Be,g}}const f=ge;l.call=(g,b,v)=>Ge(g,f,b,v);let d=!1;r==="post"?l.scheduler=g=>{xe(g,f&&f.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(g,b)=>{b?g():Qn(g)}),l.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,f&&(g.id=f.uid,g.i=f))};const p=$l(e,t,l);return ls&&(c?c.push(p):a&&p()),p}function ba(e,t,s){const n=this.proxy,o=ne(e)?e.includes(".")?Zr(n,e):()=>n[e]:e.bind(n,n);let r;q(t)?r=t:(r=t.handler,s=t);const i=ps(this),l=Jr(o,r.bind(n),s);return i(),l}function Zr(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const va=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ht(t)}Modifiers`]||e[`${Mt(t)}Modifiers`];function _a(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||G;let o=s;const r=t.startsWith("update:"),i=r&&va(n,t.slice(7));i&&(i.trim&&(o=s.map(f=>ne(f)?f.trim():f)),i.number&&(o=s.map(gr)));let l,a=n[l=tn(t)]||n[l=tn(ht(t))];!a&&r&&(a=n[l=tn(Mt(t))]),a&&Ge(a,e,6,o);const c=n[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ge(c,e,6,o)}}const ya=new WeakMap;function Xr(e,t,s=!1){const n=s?ya:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let i={},l=!1;if(!q(e)){const a=c=>{const f=Xr(c,t,!0);f&&(l=!0,ue(i,f))};!s&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(J(e)&&n.set(e,null),null):(N(r)?r.forEach(a=>i[a]=null):ue(i,r),J(e)&&n.set(e,i),i)}function Ys(e,t){return!e||!Hs(t)?!1:(t=t.slice(2).replace(/Once$/,""),B(e,t[0].toLowerCase()+t.slice(1))||B(e,Mt(t))||B(e,t))}function Mo(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:i,attrs:l,emit:a,render:c,renderCache:f,props:d,data:p,setupState:g,ctx:b,inheritAttrs:v}=e,A=Rs(e);let E,C;try{if(s.shapeFlag&4){const T=o||n,j=T;E=Ve(c.call(j,T,f,d,g,p,b)),C=l}else{const T=t;E=Ve(T.length>1?T(d,{attrs:l,slots:i,emit:a}):T(d,null)),C=t.props?l:wa(l)}}catch(T){ts.length=0,Qs(T,e,1),E=We(dt)}let D=E;if(C&&v!==!1){const T=Object.keys(C),{shapeFlag:j}=D;T.length&&j&7&&(r&&T.some(Ln)&&(C=Sa(C,r)),D=Kt(D,C,!1,!0))}return s.dirs&&(D=Kt(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(s.dirs):s.dirs),s.transition&&zn(D,s.transition),E=D,Rs(A),E}const wa=e=>{let t;for(const s in e)(s==="class"||s==="style"||Hs(s))&&((t||(t={}))[s]=e[s]);return t},Sa=(e,t)=>{const s={};for(const n in e)(!Ln(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Ca(e,t,s){const{props:n,children:o,component:r}=e,{props:i,children:l,patchFlag:a}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return n?To(n,i,c):!!i;if(a&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const p=f[d];if(i[p]!==n[p]&&!Ys(c,p))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===i?!1:n?i?To(n,i,c):!0:!!i;return!1}function To(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!Ys(s,r))return!0}return!1}function xa({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const ei={},ti=()=>Object.create(ei),si=e=>Object.getPrototypeOf(e)===ei;function Ea(e,t,s,n=!1){const o={},r=ti();e.propsDefaults=Object.create(null),ni(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);s?e.props=n?o:Il(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function ka(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,l=V(o),[a]=e.propsOptions;let c=!1;if((n||i>0)&&!(i&16)){if(i&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let p=f[d];if(Ys(e.emitsOptions,p))continue;const g=t[p];if(a)if(B(r,p))g!==r[p]&&(r[p]=g,c=!0);else{const b=ht(p);o[b]=Pn(a,l,b,g,e,!1)}else g!==r[p]&&(r[p]=g,c=!0)}}}else{ni(e,t,o,r)&&(c=!0);let f;for(const d in l)(!t||!B(t,d)&&((f=Mt(d))===d||!B(t,f)))&&(a?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=Pn(a,l,d,void 0,e,!0)):delete o[d]);if(r!==l)for(const d in r)(!t||!B(t,d))&&(delete r[d],c=!0)}c&&Je(e.attrs,"set","")}function ni(e,t,s,n){const[o,r]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(zt(a))continue;const c=t[a];let f;o&&B(o,f=ht(a))?!r||!r.includes(f)?s[f]=c:(l||(l={}))[f]=c:Ys(e.emitsOptions,a)||(!(a in n)||c!==n[a])&&(n[a]=c,i=!0)}if(r){const a=V(s),c=l||G;for(let f=0;f<r.length;f++){const d=r[f];s[d]=Pn(o,a,d,c[d],e,!B(c,d))}}return i}function Pn(e,t,s,n,o,r){const i=e[s];if(i!=null){const l=B(i,"default");if(l&&n===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&q(a)){const{propsDefaults:c}=o;if(s in c)n=c[s];else{const f=ps(o);n=c[s]=a.call(null,t),f()}}else n=a;o.ce&&o.ce._setProp(s,n)}i[0]&&(r&&!l?n=!1:i[1]&&(n===""||n===Mt(s))&&(n=!0))}return n}const Pa=new WeakMap;function oi(e,t,s=!1){const n=s?Pa:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,i={},l=[];let a=!1;if(!q(e)){const f=d=>{a=!0;const[p,g]=oi(d,t,!0);ue(i,p),g&&l.push(...g)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!a)return J(e)&&n.set(e,Rt),Rt;if(N(r))for(let f=0;f<r.length;f++){const d=ht(r[f]);Ao(d)&&(i[d]=G)}else if(r)for(const f in r){const d=ht(f);if(Ao(d)){const p=r[f],g=i[d]=N(p)||q(p)?{type:p}:ue({},p),b=g.type;let v=!1,A=!0;if(N(b))for(let E=0;E<b.length;++E){const C=b[E],D=q(C)&&C.name;if(D==="Boolean"){v=!0;break}else D==="String"&&(A=!1)}else v=q(b)&&b.name==="Boolean";g[0]=v,g[1]=A,(v||B(g,"default"))&&l.push(d)}}const c=[i,l];return J(e)&&n.set(e,c),c}function Ao(e){return e[0]!=="$"&&!zt(e)}const Yn=e=>e==="_"||e==="_ctx"||e==="$stable",Jn=e=>N(e)?e.map(Ve):[Ve(e)],Ma=(e,t,s)=>{if(t._n)return t;const n=Bl((...o)=>Jn(t(...o)),s);return n._c=!1,n},ri=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Yn(o))continue;const r=e[o];if(q(r))t[o]=Ma(o,r,n);else if(r!=null){const i=Jn(r);t[o]=()=>i}}},ii=(e,t)=>{const s=Jn(t);e.slots.default=()=>s},li=(e,t,s)=>{for(const n in t)(s||!Yn(n))&&(e[n]=t[n])},Ta=(e,t,s)=>{const n=e.slots=ti();if(e.vnode.shapeFlag&32){const o=t._;o?(li(n,t,s),s&&pr(n,"_",o,!0)):ri(t,n)}else t&&ii(e,t)},Aa=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,i=G;if(n.shapeFlag&32){const l=t._;l?s&&l===1?r=!1:li(o,t,s):(r=!t.$stable,ri(t,o)),i=t}else t&&(ii(e,t),i={default:1});if(r)for(const l in o)!Yn(l)&&i[l]==null&&delete o[l]},xe=Da;function Oa(e){return Ia(e)}function Ia(e,t){const s=Ws();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:i,createText:l,createComment:a,setText:c,setElementText:f,parentNode:d,nextSibling:p,setScopeId:g=Be,insertStaticContent:b}=e,v=(u,h,m,S=null,_=null,y=null,P=void 0,k=null,x=!!h.dynamicChildren)=>{if(u===h)return;u&&!Vt(u,h)&&(S=vs(u),Le(u,_,y,!0),u=null),h.patchFlag===-2&&(x=!1,h.dynamicChildren=null);const{type:w,ref:R,shapeFlag:M}=h;switch(w){case Js:A(u,h,m,S);break;case dt:E(u,h,m,S);break;case cn:u==null&&C(h,m,S,P);break;case Re:Pe(u,h,m,S,_,y,P,k,x);break;default:M&1?j(u,h,m,S,_,y,P,k,x):M&6?ms(u,h,m,S,_,y,P,k,x):(M&64||M&128)&&w.process(u,h,m,S,_,y,P,k,x,$t)}R!=null&&_?Zt(R,u&&u.ref,y,h||u,!h):R==null&&u&&u.ref!=null&&Zt(u.ref,null,y,u,!0)},A=(u,h,m,S)=>{if(u==null)n(h.el=l(h.children),m,S);else{const _=h.el=u.el;h.children!==u.children&&c(_,h.children)}},E=(u,h,m,S)=>{u==null?n(h.el=a(h.children||""),m,S):h.el=u.el},C=(u,h,m,S)=>{[u.el,u.anchor]=b(u.children,h,m,S,u.el,u.anchor)},D=({el:u,anchor:h},m,S)=>{let _;for(;u&&u!==h;)_=p(u),n(u,m,S),u=_;n(h,m,S)},T=({el:u,anchor:h})=>{let m;for(;u&&u!==h;)m=p(u),o(u),u=m;o(h)},j=(u,h,m,S,_,y,P,k,x)=>{if(h.type==="svg"?P="svg":h.type==="math"&&(P="mathml"),u==null)le(h,m,S,_,y,P,k,x);else{const w=u.el&&u.el._isVueCE?u.el:null;try{w&&w._beginPatch(),U(u,h,_,y,P,k,x)}finally{w&&w._endPatch()}}},le=(u,h,m,S,_,y,P,k)=>{let x,w;const{props:R,shapeFlag:M,transition:I,dirs:L}=u;if(x=u.el=i(u.type,y,R&&R.is,R),M&8?f(x,u.children):M&16&&O(u.children,x,null,S,_,an(u,y),P,k),L&&vt(u,null,S,"created"),F(x,u,u.scopeId,P,S),R){for(const z in R)z!=="value"&&!zt(z)&&r(x,z,null,R[z],y,S);"value"in R&&r(x,"value",null,R.value,y),(w=R.onVnodeBeforeMount)&&$e(w,S,u)}L&&vt(u,null,S,"beforeMount");const H=Ra(_,I);H&&I.beforeEnter(x),n(x,h,m),((w=R&&R.onVnodeMounted)||H||L)&&xe(()=>{w&&$e(w,S,u),H&&I.enter(x),L&&vt(u,null,S,"mounted")},_)},F=(u,h,m,S,_)=>{if(m&&g(u,m),S)for(let y=0;y<S.length;y++)g(u,S[y]);if(_){let y=_.subTree;if(h===y||fi(y.type)&&(y.ssContent===h||y.ssFallback===h)){const P=_.vnode;F(u,P,P.scopeId,P.slotScopeIds,_.parent)}}},O=(u,h,m,S,_,y,P,k,x=0)=>{for(let w=x;w<u.length;w++){const R=u[w]=k?ct(u[w]):Ve(u[w]);v(null,R,h,m,S,_,y,P,k)}},U=(u,h,m,S,_,y,P)=>{const k=h.el=u.el;let{patchFlag:x,dynamicChildren:w,dirs:R}=h;x|=u.patchFlag&16;const M=u.props||G,I=h.props||G;let L;if(m&&_t(m,!1),(L=I.onVnodeBeforeUpdate)&&$e(L,m,h,u),R&&vt(h,u,m,"beforeUpdate"),m&&_t(m,!0),(M.innerHTML&&I.innerHTML==null||M.textContent&&I.textContent==null)&&f(k,""),w?Z(u.dynamicChildren,w,k,m,S,an(h,_),y):P||Q(u,h,k,null,m,S,an(h,_),y,!1),x>0){if(x&16)se(k,M,I,m,_);else if(x&2&&M.class!==I.class&&r(k,"class",null,I.class,_),x&4&&r(k,"style",M.style,I.style,_),x&8){const H=h.dynamicProps;for(let z=0;z<H.length;z++){const W=H[z],be=M[W],ve=I[W];(ve!==be||W==="value")&&r(k,W,be,ve,_,m)}}x&1&&u.children!==h.children&&f(k,h.children)}else!P&&w==null&&se(k,M,I,m,_);((L=I.onVnodeUpdated)||R)&&xe(()=>{L&&$e(L,m,h,u),R&&vt(h,u,m,"updated")},S)},Z=(u,h,m,S,_,y,P)=>{for(let k=0;k<h.length;k++){const x=u[k],w=h[k],R=x.el&&(x.type===Re||!Vt(x,w)||x.shapeFlag&198)?d(x.el):m;v(x,w,R,null,S,_,y,P,!0)}},se=(u,h,m,S,_)=>{if(h!==m){if(h!==G)for(const y in h)!zt(y)&&!(y in m)&&r(u,y,h[y],null,_,S);for(const y in m){if(zt(y))continue;const P=m[y],k=h[y];P!==k&&y!=="value"&&r(u,y,k,P,_,S)}"value"in m&&r(u,"value",h.value,m.value,_)}},Pe=(u,h,m,S,_,y,P,k,x)=>{const w=h.el=u?u.el:l(""),R=h.anchor=u?u.anchor:l("");let{patchFlag:M,dynamicChildren:I,slotScopeIds:L}=h;L&&(k=k?k.concat(L):L),u==null?(n(w,m,S),n(R,m,S),O(h.children||[],m,R,_,y,P,k,x)):M>0&&M&64&&I&&u.dynamicChildren?(Z(u.dynamicChildren,I,m,_,y,P,k),(h.key!=null||_&&h===_.subTree)&&ai(u,h,!0)):Q(u,h,m,R,_,y,P,k,x)},ms=(u,h,m,S,_,y,P,k,x)=>{h.slotScopeIds=k,u==null?h.shapeFlag&512?_.ctx.activate(h,m,S,P,x):Xs(h,m,S,_,y,P,x):fo(u,h,x)},Xs=(u,h,m,S,_,y,P)=>{const k=u.component=Ba(u,S,_);if(Vr(u)&&(k.ctx.renderer=$t),Ua(k,!1,P),k.asyncDep){if(_&&_.registerDep(k,he,P),!u.el){const x=k.subTree=We(dt);E(null,x,h,m),u.placeholder=x.el}}else he(k,u,h,m,_,y,P)},fo=(u,h,m)=>{const S=h.component=u.component;if(Ca(u,h,m))if(S.asyncDep&&!S.asyncResolved){X(S,h,m);return}else S.next=h,S.update();else h.el=u.el,S.vnode=h},he=(u,h,m,S,_,y,P)=>{const k=()=>{if(u.isMounted){let{next:M,bu:I,u:L,parent:H,vnode:z}=u;{const Ke=ci(u);if(Ke){M&&(M.el=z.el,X(u,M,P)),Ke.asyncDep.then(()=>{u.isUnmounted||k()});return}}let W=M,be;_t(u,!1),M?(M.el=z.el,X(u,M,P)):M=z,I&&xs(I),(be=M.props&&M.props.onVnodeBeforeUpdate)&&$e(be,H,M,z),_t(u,!0);const ve=Mo(u),Fe=u.subTree;u.subTree=ve,v(Fe,ve,d(Fe.el),vs(Fe),u,_,y),M.el=ve.el,W===null&&xa(u,ve.el),L&&xe(L,_),(be=M.props&&M.props.onVnodeUpdated)&&xe(()=>$e(be,H,M,z),_)}else{let M;const{el:I,props:L}=h,{bm:H,m:z,parent:W,root:be,type:ve}=u,Fe=Xt(h);_t(u,!1),H&&xs(H),!Fe&&(M=L&&L.onVnodeBeforeMount)&&$e(M,W,h),_t(u,!0);{be.ce&&be.ce._def.shadowRoot!==!1&&be.ce._injectChildStyle(ve);const Ke=u.subTree=Mo(u);v(null,Ke,m,S,u,_,y),h.el=Ke.el}if(z&&xe(z,_),!Fe&&(M=L&&L.onVnodeMounted)){const Ke=h;xe(()=>$e(M,W,Ke),_)}(h.shapeFlag&256||W&&Xt(W.vnode)&&W.vnode.shapeFlag&256)&&u.a&&xe(u.a,_),u.isMounted=!0,h=m=S=null}};u.scope.on();const x=u.effect=new yr(k);u.scope.off();const w=u.update=x.run.bind(x),R=u.job=x.runIfDirty.bind(x);R.i=u,R.id=u.uid,x.scheduler=()=>Qn(R),_t(u,!0),w()},X=(u,h,m)=>{h.component=u;const S=u.vnode.props;u.vnode=h,u.next=null,ka(u,h.props,S,m),Aa(u,h.children,m),et(),wo(u),tt()},Q=(u,h,m,S,_,y,P,k,x=!1)=>{const w=u&&u.children,R=u?u.shapeFlag:0,M=h.children,{patchFlag:I,shapeFlag:L}=h;if(I>0){if(I&128){bs(w,M,m,S,_,y,P,k,x);return}else if(I&256){mt(w,M,m,S,_,y,P,k,x);return}}L&8?(R&16&&qt(w,_,y),M!==w&&f(m,M)):R&16?L&16?bs(w,M,m,S,_,y,P,k,x):qt(w,_,y,!0):(R&8&&f(m,""),L&16&&O(M,m,S,_,y,P,k,x))},mt=(u,h,m,S,_,y,P,k,x)=>{u=u||Rt,h=h||Rt;const w=u.length,R=h.length,M=Math.min(w,R);let I;for(I=0;I<M;I++){const L=h[I]=x?ct(h[I]):Ve(h[I]);v(u[I],L,m,null,_,y,P,k,x)}w>R?qt(u,_,y,!0,!1,M):O(h,m,S,_,y,P,k,x,M)},bs=(u,h,m,S,_,y,P,k,x)=>{let w=0;const R=h.length;let M=u.length-1,I=R-1;for(;w<=M&&w<=I;){const L=u[w],H=h[w]=x?ct(h[w]):Ve(h[w]);if(Vt(L,H))v(L,H,m,null,_,y,P,k,x);else break;w++}for(;w<=M&&w<=I;){const L=u[M],H=h[I]=x?ct(h[I]):Ve(h[I]);if(Vt(L,H))v(L,H,m,null,_,y,P,k,x);else break;M--,I--}if(w>M){if(w<=I){const L=I+1,H=L<R?h[L].el:S;for(;w<=I;)v(null,h[w]=x?ct(h[w]):Ve(h[w]),m,H,_,y,P,k,x),w++}}else if(w>I)for(;w<=M;)Le(u[w],_,y,!0),w++;else{const L=w,H=w,z=new Map;for(w=H;w<=I;w++){const Se=h[w]=x?ct(h[w]):Ve(h[w]);Se.key!=null&&z.set(Se.key,w)}let W,be=0;const ve=I-H+1;let Fe=!1,Ke=0;const jt=new Array(ve);for(w=0;w<ve;w++)jt[w]=0;for(w=L;w<=M;w++){const Se=u[w];if(be>=ve){Le(Se,_,y,!0);continue}let qe;if(Se.key!=null)qe=z.get(Se.key);else for(W=H;W<=I;W++)if(jt[W-H]===0&&Vt(Se,h[W])){qe=W;break}qe===void 0?Le(Se,_,y,!0):(jt[qe-H]=w+1,qe>=Ke?Ke=qe:Fe=!0,v(Se,h[qe],m,null,_,y,P,k,x),be++)}const po=Fe?Na(jt):Rt;for(W=po.length-1,w=ve-1;w>=0;w--){const Se=H+w,qe=h[Se],go=h[Se+1],mo=Se+1<R?go.el||go.placeholder:S;jt[w]===0?v(null,qe,m,mo,_,y,P,k,x):Fe&&(W<0||w!==po[W]?bt(qe,m,mo,2):W--)}}},bt=(u,h,m,S,_=null)=>{const{el:y,type:P,transition:k,children:x,shapeFlag:w}=u;if(w&6){bt(u.component.subTree,h,m,S);return}if(w&128){u.suspense.move(h,m,S);return}if(w&64){P.move(u,h,m,$t);return}if(P===Re){n(y,h,m);for(let M=0;M<x.length;M++)bt(x[M],h,m,S);n(u.anchor,h,m);return}if(P===cn){D(u,h,m);return}if(S!==2&&w&1&&k)if(S===0)k.beforeEnter(y),n(y,h,m),xe(()=>k.enter(y),_);else{const{leave:M,delayLeave:I,afterLeave:L}=k,H=()=>{u.ctx.isUnmounted?o(y):n(y,h,m)},z=()=>{y._isLeaving&&y[Gl](!0),M(y,()=>{H(),L&&L()})};I?I(y,H,z):z()}else n(y,h,m)},Le=(u,h,m,S=!1,_=!1)=>{const{type:y,props:P,ref:k,children:x,dynamicChildren:w,shapeFlag:R,patchFlag:M,dirs:I,cacheIndex:L}=u;if(M===-2&&(_=!1),k!=null&&(et(),Zt(k,null,m,u,!0),tt()),L!=null&&(h.renderCache[L]=void 0),R&256){h.ctx.deactivate(u);return}const H=R&1&&I,z=!Xt(u);let W;if(z&&(W=P&&P.onVnodeBeforeUnmount)&&$e(W,h,u),R&6)Xi(u.component,m,S);else{if(R&128){u.suspense.unmount(m,S);return}H&&vt(u,null,h,"beforeUnmount"),R&64?u.type.remove(u,h,m,$t,S):w&&!w.hasOnce&&(y!==Re||M>0&&M&64)?qt(w,h,m,!1,!0):(y===Re&&M&384||!_&&R&16)&&qt(x,h,m),S&&uo(u)}(z&&(W=P&&P.onVnodeUnmounted)||H)&&xe(()=>{W&&$e(W,h,u),H&&vt(u,null,h,"unmounted")},m)},uo=u=>{const{type:h,el:m,anchor:S,transition:_}=u;if(h===Re){Zi(m,S);return}if(h===cn){T(u);return}const y=()=>{o(m),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(u.shapeFlag&1&&_&&!_.persisted){const{leave:P,delayLeave:k}=_,x=()=>P(m,y);k?k(u.el,y,x):x()}else y()},Zi=(u,h)=>{let m;for(;u!==h;)m=p(u),o(u),u=m;o(h)},Xi=(u,h,m)=>{const{bum:S,scope:_,job:y,subTree:P,um:k,m:x,a:w}=u;Oo(x),Oo(w),S&&xs(S),_.stop(),y&&(y.flags|=8,Le(P,u,h,m)),k&&xe(k,h),xe(()=>{u.isUnmounted=!0},h)},qt=(u,h,m,S=!1,_=!1,y=0)=>{for(let P=y;P<u.length;P++)Le(u[P],h,m,S,_)},vs=u=>{if(u.shapeFlag&6)return vs(u.component.subTree);if(u.shapeFlag&128)return u.suspense.next();const h=p(u.anchor||u.el),m=h&&h[Wl];return m?p(m):h};let en=!1;const ho=(u,h,m)=>{u==null?h._vnode&&Le(h._vnode,null,null,!0):v(h._vnode||null,u,h,null,null,null,m),h._vnode=u,en||(en=!0,wo(),Kr(),en=!1)},$t={p:v,um:Le,m:bt,r:uo,mt:Xs,mc:O,pc:Q,pbc:Z,n:vs,o:e};return{render:ho,hydrate:void 0,createApp:da(ho)}}function an({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function _t({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ra(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ai(e,t,s=!1){const n=e.children,o=t.children;if(N(n)&&N(o))for(let r=0;r<n.length;r++){const i=n[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=ct(o[r]),l.el=i.el),!s&&l.patchFlag!==-2&&ai(i,l)),l.type===Js&&l.patchFlag!==-1&&(l.el=i.el),l.type===dt&&!l.el&&(l.el=i.el)}}function Na(e){const t=e.slice(),s=[0];let n,o,r,i,l;const a=e.length;for(n=0;n<a;n++){const c=e[n];if(c!==0){if(o=s[s.length-1],e[o]<c){t[n]=o,s.push(n);continue}for(r=0,i=s.length-1;r<i;)l=r+i>>1,e[s[l]]<c?r=l+1:i=l;c<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,i=s[r-1];r-- >0;)s[r]=i,i=t[i];return s}function ci(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ci(t)}function Oo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const fi=e=>e.__isSuspense;function Da(e,t){t&&t.pendingBranch?N(e)?t.effects.push(...e):t.effects.push(e):Vl(e)}const Re=Symbol.for("v-fgt"),Js=Symbol.for("v-txt"),dt=Symbol.for("v-cmt"),cn=Symbol.for("v-stc"),ts=[];let ke=null;function kt(e=!1){ts.push(ke=e?null:[])}function La(){ts.pop(),ke=ts[ts.length-1]||null}let rs=1;function Io(e,t=!1){rs+=e,e<0&&ke&&t&&(ke.hasOnce=!0)}function ui(e){return e.dynamicChildren=rs>0?ke||Rt:null,La(),rs>0&&ke&&ke.push(e),e}function is(e,t,s,n,o,r){return ui(te(e,t,s,n,o,r,!0))}function hi(e,t,s,n,o){return ui(We(e,t,s,n,o,!0))}function di(e){return e?e.__v_isVNode===!0:!1}function Vt(e,t){return e.type===t.type&&e.key===t.key}const pi=({key:e})=>e??null,Ms=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ne(e)||fe(e)||q(e)?{i:Ae,r:e,k:t,f:!!s}:e:null);function te(e,t=null,s=null,n=0,o=null,r=e===Re?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&pi(t),ref:t&&Ms(t),scopeId:$r,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ae};return l?(Zn(a,s),r&128&&e.normalize(a)):s&&(a.shapeFlag|=ne(s)?8:16),rs>0&&!i&&ke&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&ke.push(a),a}const We=Fa;function Fa(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===ra)&&(e=dt),di(e)){const l=Kt(e,t,!0);return s&&Zn(l,s),rs>0&&!r&&ke&&(l.shapeFlag&6?ke[ke.indexOf(e)]=l:ke.push(l)),l.patchFlag=-2,l}if(Ya(e)&&(e=e.__vccOpts),t){t=Ka(t);let{class:l,style:a}=t;l&&!ne(l)&&(t.class=hs(l)),J(a)&&(Un(a)&&!N(a)&&(a=ue({},a)),t.style=qn(a))}const i=ne(e)?1:fi(e)?128:Ul(e)?64:J(e)?4:q(e)?2:0;return te(e,t,s,n,o,i,r,!0)}function Ka(e){return e?Un(e)||si(e)?ue({},e):e:null}function Kt(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:i,children:l,transition:a}=e,c=t?ja(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&pi(c),ref:t&&t.ref?s&&r?N(r)?r.concat(Ms(t)):[r,Ms(t)]:Ms(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Re?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Kt(e.ssContent),ssFallback:e.ssFallback&&Kt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&n&&zn(f,a.clone(f)),f}function qa(e=" ",t=0){return We(Js,null,e,t)}function $a(e="",t=!1){return t?(kt(),hi(dt,null,e)):We(dt,null,e)}function Ve(e){return e==null||typeof e=="boolean"?We(dt):N(e)?We(Re,null,e.slice()):di(e)?ct(e):We(Js,null,String(e))}function ct(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Kt(e)}function Zn(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(N(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Zn(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!si(t)?t._ctx=Ae:o===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else q(t)?(t={default:t,_ctx:Ae},s=32):(t=String(t),n&64?(s=16,t=[qa(t)]):s=8);e.children=t,e.shapeFlag|=s}function ja(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=hs([t.class,n.class]));else if(o==="style")t.style=qn([t.style,n.style]);else if(Hs(o)){const r=t[o],i=n[o];i&&r!==i&&!(N(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=n[o])}return t}function $e(e,t,s,n=null){Ge(e,t,7,[s,n])}const Ha=Yr();let Va=0;function Ba(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Ha,r={uid:Va++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oi(n,o),emitsOptions:Xr(n,o),emit:null,emitted:null,propsDefaults:G,inheritAttrs:n.inheritAttrs,ctx:G,data:G,props:G,attrs:G,slots:G,refs:G,setupState:G,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=_a.bind(null,r),e.ce&&e.ce(r),r}let ge=null;const Wa=()=>ge||Ae;let Ls,Mn;{const e=Ws(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(i=>i(r)):o[0](r)}};Ls=t("__VUE_INSTANCE_SETTERS__",s=>ge=s),Mn=t("__VUE_SSR_SETTERS__",s=>ls=s)}const ps=e=>{const t=ge;return Ls(e),e.scope.on(),()=>{e.scope.off(),Ls(t)}},Ro=()=>{ge&&ge.scope.off(),Ls(null)};function gi(e){return e.vnode.shapeFlag&4}let ls=!1;function Ua(e,t=!1,s=!1){t&&Mn(t);const{props:n,children:o}=e.vnode,r=gi(e);Ea(e,n,r,t),Ta(e,o,s||t);const i=r?Ga(e,t):void 0;return t&&Mn(!1),i}function Ga(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ia);const{setup:n}=s;if(n){et();const o=e.setupContext=n.length>1?za(e):null,r=ps(e),i=ds(n,e,0,[e.props,o]),l=fr(i);if(tt(),r(),(l||e.sp)&&!Xt(e)&&Hr(e),l){if(i.then(Ro,Ro),t)return i.then(a=>{No(e,a)}).catch(a=>{Qs(a,e,0)});e.asyncDep=i}else No(e,i)}else mi(e)}function No(e,t,s){q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:J(t)&&(e.setupState=Dr(t)),mi(e)}function mi(e,t,s){const n=e.type;e.render||(e.render=n.render||Be);{const o=ps(e);et();try{la(e)}finally{tt(),o()}}}const Qa={get(e,t){return ce(e,"get",""),e[t]}};function za(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Qa),slots:e.slots,emit:e.emit,expose:t}}function Zs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Dr(Rl(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in es)return es[s](e)},has(t,s){return s in t||s in es}})):e.proxy}function Ya(e){return q(e)&&"__vccOpts"in e}const Ja=(e,t)=>Kl(e,t,ls),Za="3.5.25";let Tn;const Do=typeof window<"u"&&window.trustedTypes;if(Do)try{Tn=Do.createPolicy("vue",{createHTML:e=>e})}catch{}const bi=Tn?e=>Tn.createHTML(e):e=>e,Xa="http://www.w3.org/2000/svg",ec="http://www.w3.org/1998/Math/MathML",Ye=typeof document<"u"?document:null,Lo=Ye&&Ye.createElement("template"),tc={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Ye.createElementNS(Xa,e):t==="mathml"?Ye.createElementNS(ec,e):s?Ye.createElement(e,{is:s}):Ye.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Ye.createTextNode(e),createComment:e=>Ye.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ye.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const i=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{Lo.innerHTML=bi(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=Lo.content;if(n==="svg"||n==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},sc=Symbol("_vtc");function nc(e,t,s){const n=e[sc];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Fo=Symbol("_vod"),oc=Symbol("_vsh"),rc=Symbol(""),ic=/(?:^|;)\s*display\s*:/;function lc(e,t,s){const n=e.style,o=ne(s);let r=!1;if(s&&!o){if(t)if(ne(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();s[l]==null&&Ts(n,l,"")}else for(const i in t)s[i]==null&&Ts(n,i,"");for(const i in s)i==="display"&&(r=!0),Ts(n,i,s[i])}else if(o){if(t!==s){const i=n[rc];i&&(s+=";"+i),n.cssText=s,r=ic.test(s)}}else t&&e.removeAttribute("style");Fo in e&&(e[Fo]=r?n.display:"",e[oc]&&(n.display="none"))}const Ko=/\s*!important$/;function Ts(e,t,s){if(N(s))s.forEach(n=>Ts(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=ac(e,t);Ko.test(s)?e.setProperty(Mt(n),s.replace(Ko,""),"important"):e[n]=s}}const qo=["Webkit","Moz","ms"],fn={};function ac(e,t){const s=fn[t];if(s)return s;let n=ht(t);if(n!=="filter"&&n in e)return fn[t]=n;n=dr(n);for(let o=0;o<qo.length;o++){const r=qo[o]+n;if(r in e)return fn[t]=r}return t}const $o="http://www.w3.org/1999/xlink";function jo(e,t,s,n,o,r=cl(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS($o,t.slice(6,t.length)):e.setAttributeNS($o,t,s):s==null||r&&!mr(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Ue(s)?String(s):s)}function Ho(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?bi(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,a=s==null?e.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in e))&&(e.value=a),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=mr(s):s==null&&l==="string"?(s="",i=!0):l==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(o||t)}function vi(e,t,s,n){e.addEventListener(t,s,n)}function cc(e,t,s,n){e.removeEventListener(t,s,n)}const Vo=Symbol("_vei");function fc(e,t,s,n,o=null){const r=e[Vo]||(e[Vo]={}),i=r[t];if(n&&i)i.value=n;else{const[l,a]=uc(t);if(n){const c=r[t]=pc(n,o);vi(e,l,c,a)}else i&&(cc(e,l,i,a),r[t]=void 0)}}const Bo=/(?:Once|Passive|Capture)$/;function uc(e){let t;if(Bo.test(e)){t={};let n;for(;n=e.match(Bo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Mt(e.slice(2)),t]}let un=0;const hc=Promise.resolve(),dc=()=>un||(hc.then(()=>un=0),un=Date.now());function pc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ge(gc(n,s.value),t,5,[n])};return s.value=e,s.attached=dc(),s}function gc(e,t){if(N(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Wo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,mc=(e,t,s,n,o,r)=>{const i=o==="svg";t==="class"?nc(e,n,i):t==="style"?lc(e,s,n):Hs(t)?Ln(t)||fc(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bc(e,t,n,i))?(Ho(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&jo(e,t,n,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ne(n))?Ho(e,ht(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),jo(e,t,n,i))};function bc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Wo(t)&&q(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Wo(t)&&ne(s)?!1:t in e}const Uo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return N(t)?s=>xs(t,s):t},hn=Symbol("_assign"),Go={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=Vs(t);vi(e,"change",()=>{const r=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>s?gr(Fs(i)):Fs(i));e[hn](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Gn(()=>{e._assigning=!1})}),e[hn]=Uo(n)},mounted(e,{value:t}){Qo(e,t)},beforeUpdate(e,t,s){e[hn]=Uo(s)},updated(e,{value:t}){e._assigning||Qo(e,t)}};function Qo(e,t){const s=e.multiple,n=N(t);if(!(s&&!n&&!Vs(t))){for(let o=0,r=e.options.length;o<r;o++){const i=e.options[o],l=Fs(i);if(s)if(n){const a=typeof l;a==="string"||a==="number"?i.selected=t.some(c=>String(c)===String(l)):i.selected=ul(t,l)>-1}else i.selected=t.has(l);else if(Us(Fs(i),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Fs(e){return"_value"in e?e._value:e.value}const vc=ue({patchProp:mc},tc);let zo;function _c(){return zo||(zo=Oa(vc))}const yc=((...e)=>{const t=_c().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Sc(n);if(!o)return;const r=t._component;!q(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=s(o,!1,wc(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t});function wc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Sc(e){return ne(e)?document.querySelector(e):e}const Cc={class:"promotion-dialog",open:""},xc=["aria-label","onClick","onTouchstartPassive"],Ec=jr({__name:"PromotionDialog",props:{state:{}},emits:["promotionSelected"],setup(e,{emit:t}){const s=e,n=[{name:"Queen",data:"q"},{name:"Knight",data:"n"},{name:"Rook",data:"r"},{name:"Bishop",data:"b"}];function o(r){s.state.callback?.(r.data),t("promotionSelected")}return(r,i)=>(kt(),is("dialog",Cc,[(kt(),is(Re,null,Gr(n,l=>te("button",{key:l.name,type:"button",class:hs([l.name.toLowerCase(),r.state.color]),"aria-label":l.name,onClick:a=>o(l),onTouchstartPassive:a=>o(l)},null,42,xc)),64))]))}});const ae="w",Me="b",re="p",An="n",As="b",Qt="r",ft="q",ie="k",dn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Ce=-1,kc={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Pc=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],$={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},K={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},pn={b:[16,32,17,15],w:[-16,-32,-17,-15]},Yo={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Mc=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Tc=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Ac={p:1,n:2,b:4,r:8,q:16,k:32},Oc="pnbrqkPNBRQK",Jo=[An,As,Qt,ft],Ic=7,Rc=6,Nc=1,Dc=0,Ss={[ie]:$.KSIDE_CASTLE,[ft]:$.QSIDE_CASTLE},ot={w:[{square:K.a1,flag:$.QSIDE_CASTLE},{square:K.h1,flag:$.KSIDE_CASTLE}],b:[{square:K.a8,flag:$.QSIDE_CASTLE},{square:K.h8,flag:$.KSIDE_CASTLE}]},Lc={b:Nc,w:Rc},Fc=["1-0","0-1","1/2-1/2","*"];function xt(e){return e>>4}function as(e){return e&15}function _i(e){return"0123456789".indexOf(e)!==-1}function Ee(e){const t=as(e),s=xt(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(s,s+1)}function Bt(e){return e===ae?Me:ae}function Kc(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const s=parseInt(t[5],10);if(isNaN(s)||s<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=t[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let i=0;i<o.length;i++){let l=0,a=!1;for(let c=0;c<o[i].length;c++)if(_i(o[i][c])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(o[i][c],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[i][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,a=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:i,regex:l}of r){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${i} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${i} kings`}}return{ok:!0}}function qc(e,t){const s=e.from,n=e.to,o=e.piece;let r=0,i=0,l=0;for(let a=0,c=t.length;a<c;a++){const f=t[a].from,d=t[a].to,p=t[a].piece;o===p&&s!==f&&n===d&&(r++,xt(s)===xt(f)&&i++,as(s)===as(f)&&l++)}return r>0?i>0&&l>0?Ee(s):l>0?Ee(s).charAt(1):Ee(s).charAt(0):""}function rt(e,t,s,n,o,r=void 0,i=$.NORMAL){const l=xt(n);if(o===re&&(l===Ic||l===Dc))for(let a=0;a<Jo.length;a++){const c=Jo[a];e.push({color:t,from:s,to:n,piece:o,captured:r,promotion:c,flags:i|$.PROMOTION})}else e.push({color:t,from:s,to:n,piece:o,captured:r,flags:i})}function Zo(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:re:(t=t.toLowerCase(),t==="o"?ie:t)}function gn(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class $c{_board=new Array(128);_turn=ae;_header={};_kings={w:Ce,b:Ce};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};constructor(t=dn){this.load(t)}clear(t=!1){this._board=new Array(128),this._kings={w:Ce,b:Ce},this._turn=ae,this._castling={w:0,b:0},this._epSquare=Ce,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{},this._updateSetup(this.fen())}removeHeader(t){t in this._header&&delete this._header[t]}load(t,s=!1){let n=t.split(/\s+/);if(n.length>=2&&n.length<6){const a=["-","-","0","1"];t=n.concat(a.slice(-(6-n.length))).join(" ")}n=t.split(/\s+/);const{ok:o,error:r}=Kc(t);if(!o)throw new Error(r);const i=n[0];let l=0;this.clear(s);for(let a=0;a<i.length;a++){const c=i.charAt(a);if(c==="/")l+=8;else if(_i(c))l+=parseInt(c,10);else{const f=c<"a"?ae:Me;this.put({type:c.toLowerCase(),color:f},Ee(l)),l++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=$.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=$.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=$.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=$.QSIDE_CASTLE),this._epSquare=n[3]==="-"?Ce:K[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(this.fen())}fen(){let t=0,s="";for(let r=K.a8;r<=K.h1;r++){if(this._board[r]){t>0&&(s+=t,t=0);const{color:i,type:l}=this._board[r];s+=i===ae?l.toUpperCase():l.toLowerCase()}else t++;r+1&136&&(t>0&&(s+=t),r!==K.h1&&(s+="/"),t=0,r+=8)}let n="";this._castling[ae]&$.KSIDE_CASTLE&&(n+="K"),this._castling[ae]&$.QSIDE_CASTLE&&(n+="Q"),this._castling[Me]&$.KSIDE_CASTLE&&(n+="k"),this._castling[Me]&$.QSIDE_CASTLE&&(n+="q"),n=n||"-";let o="-";if(this._epSquare!==Ce){const r=this._epSquare+(this._turn===ae?16:-16),i=[r+1,r-1];for(const l of i){if(l&136)continue;const a=this._turn;if(this._board[l]?.color===a&&this._board[l]?.type===re){this._makeMove({color:a,from:l,to:this._epSquare,piece:re,captured:re,flags:$.EP_CAPTURE});const c=!this._isKingAttacked(a);if(this._undoMove(),c){o=Ee(this._epSquare);break}}}}return[s,this._turn,n,o,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(t){this._history.length>0||(t!==dn?(this._header.SetUp="1",this._header.FEN=t):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(dn)}get(t){return this._board[K[t]]||!1}put({type:t,color:s},n){if(Oc.indexOf(t.toLowerCase())===-1||!(n in K))return!1;const o=K[n];return t==ie&&!(this._kings[s]==Ce||this._kings[s]==o)?!1:(this._board[o]={type:t,color:s},t===ie&&(this._kings[s]=o),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(t){const s=this.get(t);return delete this._board[K[t]],s&&s.type===ie&&(this._kings[s.color]=Ce),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),s}_updateCastlingRights(){const t=this._board[K.e1]?.type===ie&&this._board[K.e1]?.color===ae,s=this._board[K.e8]?.type===ie&&this._board[K.e8]?.color===Me;(!t||this._board[K.a1]?.type!==Qt||this._board[K.a1]?.color!==ae)&&(this._castling.w&=-65),(!t||this._board[K.h1]?.type!==Qt||this._board[K.h1]?.color!==ae)&&(this._castling.w&=-33),(!s||this._board[K.a8]?.type!==Qt||this._board[K.a8]?.color!==Me)&&(this._castling.b&=-65),(!s||this._board[K.h8]?.type!==Qt||this._board[K.h8]?.color!==Me)&&(this._castling.b&=-33)}_updateEnPassantSquare(){if(this._epSquare===Ce)return;const t=this._epSquare+(this._turn===ae?-16:16),s=this._epSquare+(this._turn===ae?16:-16),n=[s+1,s-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||this._board[s]?.color!==Bt(this._turn)||this._board[s]?.type!==re){this._epSquare=Ce;return}const o=r=>!(r&136)&&this._board[r]?.color===this._turn&&this._board[r]?.type===re;n.some(o)||(this._epSquare=Ce)}_attacked(t,s){for(let n=K.a8;n<=K.h1;n++){if(n&136){n+=7;continue}if(this._board[n]===void 0||this._board[n].color!==t)continue;const o=this._board[n],r=n-s;if(r===0)continue;const i=r+119;if(Mc[i]&Ac[o.type]){if(o.type===re){if(r>0){if(o.color===ae)return!0}else if(o.color===Me)return!0;continue}if(o.type==="n"||o.type==="k")return!0;const l=Tc[i];let a=n+l,c=!1;for(;a!==s;){if(this._board[a]!=null){c=!0;break}a+=l}if(!c)return!0}}return!1}_isKingAttacked(t){const s=this._kings[t];return s===-1?!1:this._attacked(Bt(t),s)}isAttacked(t,s){return this._attacked(s,K[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},s=[];let n=0,o=0;for(let r=K.a8;r<=K.h1;r++){if(o=(o+1)%2,r&136){r+=7;continue}const i=this._board[r];i&&(t[i.type]=i.type in t?t[i.type]+1:1,i.type===As&&s.push(o),n++)}if(n===2||n===3&&(t[As]===1||t[An]===1))return!0;if(n===t[As]+2){let r=0;const i=s.length;for(let l=0;l<i;l++)r+=s[l];if(r===0||r===i)return!0}return!1}isThreefoldRepetition(){const t=[],s={};let n=!1;for(;;){const o=this._undoMove();if(!o)break;t.push(o)}for(;;){const o=this.fen().split(" ").slice(0,4).join(" ");s[o]=o in s?s[o]+1:1,s[o]>=3&&(n=!0);const r=t.pop();if(r)this._makeMove(r);else break}return n}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:t=!1,square:s=void 0,piece:n=void 0}={}){const o=this._moves({square:s,piece:n});return t?o.map(r=>this._makePretty(r)):o.map(r=>this._moveToSan(r,o))}_moves({legal:t=!0,piece:s=void 0,square:n=void 0}={}){const o=n?n.toLowerCase():void 0,r=s?.toLowerCase(),i=[],l=this._turn,a=Bt(l);let c=K.a8,f=K.h1,d=!1;if(o)if(o in K)c=f=K[o],d=!0;else return[];for(let g=c;g<=f;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===a)continue;const{type:b}=this._board[g];let v;if(b===re){if(r&&r!==b)continue;v=g+pn[l][0],this._board[v]||(rt(i,l,g,v,re),v=g+pn[l][1],Lc[l]===xt(g)&&!this._board[v]&&rt(i,l,g,v,re,void 0,$.BIG_PAWN));for(let A=2;A<4;A++)v=g+pn[l][A],!(v&136)&&(this._board[v]?.color===a?rt(i,l,g,v,re,this._board[v].type,$.CAPTURE):v===this._epSquare&&rt(i,l,g,v,re,re,$.EP_CAPTURE))}else{if(r&&r!==b)continue;for(let A=0,E=Yo[b].length;A<E;A++){const C=Yo[b][A];for(v=g;v+=C,!(v&136);){if(!this._board[v])rt(i,l,g,v,b);else{if(this._board[v].color===l)break;rt(i,l,g,v,b,this._board[v].type,$.CAPTURE);break}if(b===An||b===ie)break}}}}if((r===void 0||r===ie)&&(!d||f===this._kings[l])){if(this._castling[l]&$.KSIDE_CASTLE){const g=this._kings[l],b=g+2;!this._board[g+1]&&!this._board[b]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,g+1)&&!this._attacked(a,b)&&rt(i,l,this._kings[l],b,ie,void 0,$.KSIDE_CASTLE)}if(this._castling[l]&$.QSIDE_CASTLE){const g=this._kings[l],b=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,g-1)&&!this._attacked(a,b)&&rt(i,l,this._kings[l],b,ie,void 0,$.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return i;const p=[];for(let g=0,b=i.length;g<b;g++)this._makeMove(i[g]),this._isKingAttacked(l)||p.push(i[g]),this._undoMove();return p}move(t,{strict:s=!1}={}){let n=null;if(typeof t=="string")n=this._moveFromSan(t,s);else if(typeof t=="object"){const r=this._moves();for(let i=0,l=r.length;i<l;i++)if(t.from===Ee(r[i].from)&&t.to===Ee(r[i].to)&&(!("promotion"in r[i])||t.promotion===r[i].promotion)){n=r[i];break}}if(!n)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);const o=this._makePretty(n);return this._makeMove(n),o}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(t){const s=this._turn,n=Bt(s);if(this._push(t),this._board[t.to]=this._board[t.from],delete this._board[t.from],t.flags&$.EP_CAPTURE&&(this._turn===Me?delete this._board[t.to-16]:delete this._board[t.to+16]),t.promotion&&(this._board[t.to]={type:t.promotion,color:s}),this._board[t.to].type===ie){if(this._kings[s]=t.to,t.flags&$.KSIDE_CASTLE){const o=t.to-1,r=t.to+1;this._board[o]=this._board[r],delete this._board[r]}else if(t.flags&$.QSIDE_CASTLE){const o=t.to+1,r=t.to-2;this._board[o]=this._board[r],delete this._board[r]}this._castling[s]=0}if(this._castling[s]){for(let o=0,r=ot[s].length;o<r;o++)if(t.from===ot[s][o].square&&this._castling[s]&ot[s][o].flag){this._castling[s]^=ot[s][o].flag;break}}if(this._castling[n]){for(let o=0,r=ot[n].length;o<r;o++)if(t.to===ot[n][o].square&&this._castling[n]&ot[n][o].flag){this._castling[n]^=ot[n][o].flag;break}}t.flags&$.BIG_PAWN?s===Me?this._epSquare=t.to-16:this._epSquare=t.to+16:this._epSquare=Ce,t.piece===re?this._halfMoves=0:t.flags&($.CAPTURE|$.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,s===Me&&this._moveNumber++,this._turn=n}undo(){const t=this._undoMove();return t?this._makePretty(t):null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;const s=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber;const n=this._turn,o=Bt(n);if(this._board[s.from]=this._board[s.to],this._board[s.from].type=s.piece,delete this._board[s.to],s.captured)if(s.flags&$.EP_CAPTURE){let r;n===Me?r=s.to-16:r=s.to+16,this._board[r]={type:re,color:o}}else this._board[s.to]={type:s.captured,color:o};if(s.flags&($.KSIDE_CASTLE|$.QSIDE_CASTLE)){let r,i;s.flags&$.KSIDE_CASTLE?(r=s.to+1,i=s.to-1):(r=s.to-2,i=s.to+1),this._board[r]=this._board[i],delete this._board[i]}return s}pgn({newline:t=`
`,maxWidth:s=0}={}){const n=[];let o=!1;for(const p in this._header)n.push("["+p+' "'+this._header[p]+'"]'+t),o=!0;o&&this._history.length&&n.push(t);const r=p=>{const g=this._comments[this.fen()];if(typeof g<"u"){const b=p.length>0?" ":"";p=`${p}${b}{${g}}`}return p},i=[];for(;this._history.length>0;)i.push(this._undoMove());const l=[];let a="";for(i.length===0&&l.push(r(""));i.length>0;){a=r(a);const p=i.pop();if(!p)break;if(!this._history.length&&p.color==="b"){const g=`${this._moveNumber}. ...`;a=a?`${a} ${g}`:g}else p.color==="w"&&(a.length&&l.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(p,this._moves({legal:!0})),this._makeMove(p)}if(a.length&&l.push(r(a)),typeof this._header.Result<"u"&&l.push(this._header.Result),s===0)return n.join("")+l.join(" ");const c=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},f=function(p,g){for(const b of g.split(" "))if(b){if(p+b.length>s){for(;c();)p--;n.push(t),p=0}n.push(b),p+=b.length,n.push(" "),p++}return c()&&p--,p};let d=0;for(let p=0;p<l.length;p++){if(d+l[p].length>s&&l[p].includes("{")){d=f(d,l[p]);continue}d+l[p].length>s&&p!==0?(n[n.length-1]===" "&&n.pop(),n.push(t),d=0):p!==0&&(n.push(" "),d++),n.push(l[p]),d+=l[p].length}return n.join("")}header(...t){for(let s=0;s<t.length;s+=2)typeof t[s]=="string"&&typeof t[s+1]=="string"&&(this._header[t[s]]=t[s+1]);return this._header}loadPgn(t,{strict:s=!1,newlineChar:n=`\r?
`}={}){function o(C){return C.replace(/\\/g,"\\")}function r(C){const D={},T=C.split(new RegExp(o(n)));let j="",le="";for(let F=0;F<T.length;F++){const O=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;j=T[F].replace(O,"$1"),le=T[F].replace(O,"$2"),j.trim().length>0&&(D[j]=le)}return D}t=t.trim();const i=new RegExp("^(\\[((?:"+o(n)+")|.)*\\])((?:\\s*"+o(n)+"){2}|(?:\\s*"+o(n)+")*$)").exec(t),l=i&&i.length>=2?i[1]:"";this.reset();const a=r(l);let c="";for(const C in a)C.toLowerCase()==="fen"&&(c=a[C]),this.header(C,a[C]);if(!s)c&&this.load(c,!0);else if(a.SetUp==="1"){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,!0)}function f(C){return Array.from(C).map(function(D){return D.charCodeAt(0)<128?D.charCodeAt(0).toString(16):encodeURIComponent(D).replace(/%/g,"").toLowerCase()}).join("")}function d(C){return C.length==0?"":decodeURIComponent("%"+(C.match(/.{1,2}/g)||[]).join("%"))}const p=function(C){return C=C.replace(new RegExp(o(n),"g")," "),`{${f(C.slice(1,C.length-1))}}`},g=function(C){if(C.startsWith("{")&&C.endsWith("}"))return d(C.slice(1,C.length-1))};let b=t.replace(l,"").replace(new RegExp(`({[^}]*})+?|;([^${o(n)}]*)`,"g"),function(C,D,T){return D!==void 0?p(D):" "+p(`{${T.slice(1)}}`)}).replace(new RegExp(o(n),"g")," ");const v=/(\([^()]+\))+?/g;for(;v.test(b);)b=b.replace(v,"");b=b.replace(/\d+\.(\.\.)?/g,""),b=b.replace(/\.\.\./g,""),b=b.replace(/\$\d+/g,"");let A=b.trim().split(new RegExp(/\s+/));A=A.filter(C=>C!=="");let E="";for(let C=0;C<A.length;C++){const D=g(A[C]);if(D!==void 0){this._comments[this.fen()]=D;continue}const T=this._moveFromSan(A[C],s);if(T==null)if(Fc.indexOf(A[C])>-1)E=A[C];else throw new Error(`Invalid move in PGN: ${A[C]}`);else E="",this._makeMove(T)}E&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",E)}_moveToSan(t,s){let n="";if(t.flags&$.KSIDE_CASTLE)n="O-O";else if(t.flags&$.QSIDE_CASTLE)n="O-O-O";else{if(t.piece!==re){const o=qc(t,s);n+=t.piece.toUpperCase()+o}t.flags&($.CAPTURE|$.EP_CAPTURE)&&(t.piece===re&&(n+=Ee(t.from)[0]),n+="x"),n+=Ee(t.to),t.promotion&&(n+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(t,s=!1){const n=gn(t);let o=Zo(n),r=this._moves({legal:!0,piece:o});for(let p=0,g=r.length;p<g;p++)if(n===gn(this._moveToSan(r[p],r)))return r[p];if(s)return null;let i,l,a,c,f,d=!1;if(l=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(i=l[1],a=l[2],c=l[3],f=l[4],a.length==1&&(d=!0)):(l=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(i=l[1],a=l[2],c=l[3],f=l[4],a.length==1&&(d=!0))),o=Zo(n),r=this._moves({legal:!0,piece:i||o}),!c)return null;for(let p=0,g=r.length;p<g;p++)if(a){if((!i||i.toLowerCase()==r[p].piece)&&K[a]==r[p].from&&K[c]==r[p].to&&(!f||f.toLowerCase()==r[p].promotion))return r[p];if(d){const b=Ee(r[p].from);if((!i||i.toLowerCase()==r[p].piece)&&K[c]==r[p].to&&(a==b[0]||a==b[1])&&(!f||f.toLowerCase()==r[p].promotion))return r[p]}}else if(n===gn(this._moveToSan(r[p],r)).replace("x",""))return r[p];return null}ascii(){let t=`   +------------------------+
`;for(let s=K.a8;s<=K.h1;s++){if(as(s)===0&&(t+=" "+"87654321"[xt(s)]+" |"),this._board[s]){const n=this._board[s].type,o=this._board[s].color===ae?n.toUpperCase():n.toLowerCase();t+=" "+o+" "}else t+=" . ";s+1&136&&(t+=`|
`,s+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const s=this._moves({legal:!1});let n=0;const o=this._turn;for(let r=0,i=s.length;r<i;r++)this._makeMove(s[r]),this._isKingAttacked(o)||(t-1>0?n+=this.perft(t-1):n++),this._undoMove();return n}_makePretty(t){const{color:s,piece:n,from:o,to:r,flags:i,captured:l,promotion:a}=t;let c="";for(const g in $)$[g]&i&&(c+=kc[g]);const f=Ee(o),d=Ee(r),p={color:s,piece:n,from:f,to:d,san:this._moveToSan(t,this._moves({legal:!0})),flags:c,lan:f+d,before:this.fen(),after:""};return this._makeMove(t),p.after=this.fen(),this._undoMove(),l&&(p.captured=l),a&&(p.promotion=a,p.lan+=a),p}turn(){return this._turn}board(){const t=[];let s=[];for(let n=K.a8;n<=K.h1;n++)this._board[n]==null?s.push(null):s.push({square:Ee(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(t.push(s),s=[],n+=8);return t}squareColor(t){if(t in K){const s=K[t];return(xt(s)+as(s))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const s=[],n=[];for(;this._history.length>0;)s.push(this._undoMove());for(;;){const o=s.pop();if(!o)break;t?n.push(this._makePretty(o)):n.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return n}_pruneComments(){const t=[],s={},n=o=>{o in this._comments&&(s[o]=this._comments[o])};for(;this._history.length>0;)t.push(this._undoMove());for(n(this.fen());;){const o=t.pop();if(!o)break;this._makeMove(o),n(this.fen())}this._comments=s}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const s=this._comments[t];return delete this._comments[t],{fen:t,comment:s}})}setCastlingRights(t,s){for(const o of[ie,ft])s[o]!==void 0&&(s[o]?this._castling[t]|=Ss[o]:this._castling[t]&=~Ss[o]);this._updateCastlingRights();const n=this.getCastlingRights(t);return(s[ie]===void 0||s[ie]===n[ie])&&(s[ft]===void 0||s[ft]===n[ft])}getCastlingRights(t){return{[ie]:(this._castling[t]&Ss[ie])!==0,[ft]:(this._castling[t]&Ss[ft])!==0}}moveNumber(){return this._moveNumber}}function jc(e){const t=[];for(const s of e)t.push({orig:s.to,brush:"yellow"}),s.captured&&t.push({orig:s.from,dest:s.to,brush:"red"}),s.san.includes("+")&&t.push({orig:s.from,dest:s.to,brush:"blue"});return t}function Cs(e){return e==="w"?"white":"black"}function Xo(e){const t=new Map;for(const s of Pc){const n=e.moves({square:s,verbose:!0});n.length&&t.set(n[0].from,n.map(o=>o.to))}return t}function Hc(e,t){if(t?.type!=="p")return!1;const s=t?.color==="w"?"8":"1";return e[1]===s}function cs(e){return!!e&&e instanceof Object&&!(e instanceof Array)&&!(e instanceof Function)}function Ks(e){return cs(e)?Object.fromEntries(Object.entries(e).map(([t,s])=>[t,Ks(s)])):e}function yi(e,t){const s={...e,...t};for(const n in s)s[n]=cs(e?.[n])&&cs(t?.[n])?yi(e[n],t[n]):Ks(s[n]);return s}function wi(e,t){const s={};for(const n in t)if(cs(e?.[n])&&cs(t?.[n])){const o=wi(e[n],t[n]);Object.keys(o).length>0&&(s[n]=o)}else e?.[n]!==t[n]&&(s[n]=t[n]);return s}const Vc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"},Bc=new Map([["b1",["a3","c3"]],["g1",["f3","h3"]],["a2",["a3","a4"]],["b2",["b3","b4"]],["c2",["c3","c4"]],["d2",["d3","d4"]],["e2",["e3","e4"]],["f2",["f3","f4"]],["g2",["g3","g4"]],["h2",["h3","h4"]]]),Wc="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Uc={fen:Wc,orientation:"white",turnColor:"white",coordinates:!1,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:300},lastMove:void 0,movable:{free:!1,color:"white",showDests:!0,dests:Bc,events:{after:()=>{},afterNewPiece:void 0},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{set:void 0,unset:void 0}},predroppable:{enabled:!1,events:{set:void 0,unset:void 0}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},events:{change:void 0,move:void 0,dropNewPiece:void 0,select:void 0,insert:void 0},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}}}},Gc=["white","black"],Xn=["a","b","c","d","e","f","g","h"],eo=["1","2","3","4","5","6","7","8"],Qc=[...eo].reverse(),to=Array.prototype.concat(...Xn.map(e=>eo.map(t=>e+t))),Te=e=>to[8*e[0]+e[1]],ee=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],Si=to.map(ee);function zc(e){let t;const s=()=>(t===void 0&&(t=e()),t);return s.clear=()=>{t=void 0},s}const Yc=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},so=e=>e==="white"?"black":"white",fs=(e,t)=>{const s=e[0]-t[0],n=e[1]-t[1];return s*s+n*n},On=(e,t)=>e.role===t.role&&e.color===t.color,gs=e=>(t,s)=>[(s?t[0]:7-t[0])*e.width/8,(s?7-t[1]:t[1])*e.height/8],He=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},Ci=(e,t,s=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${s})`},no=(e,t)=>{e.style.visibility=t?"visible":"hidden"},Tt=e=>{var t;if(e.clientX||e.clientX===0)return[e.clientX,e.clientY];if(!((t=e.targetTouches)===null||t===void 0)&&t[0])return[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},xi=e=>e.buttons===2||e.button===2,Xe=(e,t)=>{const s=document.createElement(e);return t&&(s.className=t),s};function Ei(e,t,s){const n=ee(e);return t||(n[0]=7-n[0],n[1]=7-n[1]),[s.left+s.width*n[0]/8+s.width/16,s.top+s.height*(7-n[1])/8+s.height/16]}const Pt=(e,t)=>Math.abs(e-t),Jc=e=>(t,s,n,o)=>Pt(t,n)<2&&(e==="white"?o===s+1||s<=1&&o===s+2&&t===n:o===s-1||s>=6&&o===s-2&&t===n),ki=(e,t,s,n)=>{const o=Pt(e,s),r=Pt(t,n);return o===1&&r===2||o===2&&r===1},Pi=(e,t,s,n)=>Pt(e,s)===Pt(t,n),Mi=(e,t,s,n)=>e===s||t===n,Ti=(e,t,s,n)=>Pi(e,t,s,n)||Mi(e,t,s,n),Zc=(e,t,s)=>(n,o,r,i)=>Pt(n,r)<2&&Pt(o,i)<2||s&&o===i&&o===(e==="white"?0:7)&&(n===4&&(r===2&&t.includes(0)||r===6&&t.includes(7))||t.includes(r));function Xc(e,t){const s=t==="white"?"1":"8",n=[];for(const[o,r]of e)o[1]===s&&r.color===t&&r.role==="rook"&&n.push(ee(o)[0]);return n}function Ai(e,t,s){const n=e.get(t);if(!n)return[];const o=ee(t),r=n.role,i=r==="pawn"?Jc(n.color):r==="knight"?ki:r==="bishop"?Pi:r==="rook"?Mi:r==="queen"?Ti:Zc(n.color,Xc(e,n.color),s);return Si.filter(l=>(o[0]!==l[0]||o[1]!==l[1])&&i(o[0],o[1],l[0],l[1])).map(Te)}function ye(e,...t){e&&setTimeout(()=>e(...t),1)}function ef(e){e.orientation=so(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function tf(e,t){for(const[s,n]of t)n?e.pieces.set(s,n):e.pieces.delete(s)}function sf(e,t){if(e.check=void 0,t===!0&&(t=e.turnColor),t)for(const[s,n]of e.pieces)n.role==="king"&&n.color===t&&(e.check=s)}function nf(e,t,s,n){gt(e),e.premovable.current=[t,s],ye(e.premovable.events.set,t,s,n)}function pt(e){e.premovable.current&&(e.premovable.current=void 0,ye(e.premovable.events.unset))}function of(e,t,s){pt(e),e.predroppable.current={role:t,key:s},ye(e.predroppable.events.set,t,s)}function gt(e){const t=e.predroppable;t.current&&(t.current=void 0,ye(t.events.unset))}function rf(e,t,s){if(!e.autoCastle)return!1;const n=e.pieces.get(t);if(!n||n.role!=="king")return!1;const o=ee(t),r=ee(s);if(o[1]!==0&&o[1]!==7||o[1]!==r[1])return!1;o[0]===4&&!e.pieces.has(s)&&(r[0]===6?s=Te([7,r[1]]):r[0]===2&&(s=Te([0,r[1]])));const i=e.pieces.get(s);return!i||i.color!==n.color||i.role!=="rook"?!1:(e.pieces.delete(t),e.pieces.delete(s),o[0]<r[0]?(e.pieces.set(Te([6,r[1]]),n),e.pieces.set(Te([5,r[1]]),i)):(e.pieces.set(Te([2,r[1]]),n),e.pieces.set(Te([3,r[1]]),i)),!0)}function Oi(e,t,s){const n=e.pieces.get(t),o=e.pieces.get(s);if(t===s||!n)return!1;const r=o&&o.color!==n.color?o:void 0;return s===e.selected&&Ie(e),ye(e.events.move,t,s,r),rf(e,t,s)||(e.pieces.set(s,n),e.pieces.delete(t)),e.lastMove=[t,s],e.check=void 0,ye(e.events.change),r||!0}function oo(e,t,s,n){if(e.pieces.has(s))if(n)e.pieces.delete(s);else return!1;return ye(e.events.dropNewPiece,t,s),e.pieces.set(s,t),e.lastMove=[s],e.check=void 0,ye(e.events.change),e.movable.dests=void 0,e.turnColor=so(e.turnColor),!0}function Ii(e,t,s){const n=Oi(e,t,s);return n&&(e.movable.dests=void 0,e.turnColor=so(e.turnColor),e.animation.current=void 0),n}function Ri(e,t,s){if(ro(e,t,s)){const n=Ii(e,t,s);if(n){const o=e.hold.stop();Ie(e);const r={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return n!==!0&&(r.captured=n),ye(e.movable.events.after,t,s,r),!0}}else if(af(e,t,s))return nf(e,t,s,{ctrlKey:e.stats.ctrlKey}),Ie(e),!0;return Ie(e),!1}function Ni(e,t,s,n){const o=e.pieces.get(t);o&&(lf(e,t,s)||n)?(e.pieces.delete(t),oo(e,o,s,n),ye(e.movable.events.afterNewPiece,o.role,s,{premove:!1,predrop:!1})):o&&cf(e,t,s)?of(e,o.role,s):(pt(e),gt(e)),e.pieces.delete(t),Ie(e)}function In(e,t,s){if(ye(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled){Ie(e),e.hold.cancel();return}else if((e.selectable.enabled||s)&&e.selected!==t&&Ri(e,e.selected,t)){e.stats.dragged=!1;return}}(e.selectable.enabled||e.draggable.enabled)&&(Li(e,t)||io(e,t))&&(Di(e,t),e.hold.start())}function Di(e,t){e.selected=t,io(e,t)?e.premovable.customDests||(e.premovable.dests=Ai(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function Ie(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function Li(e,t){const s=e.pieces.get(t);return!!s&&(e.movable.color==="both"||e.movable.color===s.color&&e.turnColor===s.color)}const ro=(e,t,s)=>{var n,o;return t!==s&&Li(e,t)&&(e.movable.free||!!(!((o=(n=e.movable.dests)===null||n===void 0?void 0:n.get(t))===null||o===void 0)&&o.includes(s)))};function lf(e,t,s){const n=e.pieces.get(t);return!!n&&(t===s||!e.pieces.has(s))&&(e.movable.color==="both"||e.movable.color===n.color&&e.turnColor===n.color)}function io(e,t){const s=e.pieces.get(t);return!!s&&e.premovable.enabled&&e.movable.color===s.color&&e.turnColor!==s.color}function af(e,t,s){var n,o;const r=(o=(n=e.premovable.customDests)===null||n===void 0?void 0:n.get(t))!==null&&o!==void 0?o:Ai(e.pieces,t,e.premovable.castle);return t!==s&&io(e,t)&&r.includes(s)}function cf(e,t,s){const n=e.pieces.get(t),o=e.pieces.get(s);return!!n&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&(n.role!=="pawn"||s[1]!=="1"&&s[1]!=="8")&&e.movable.color===n.color&&e.turnColor!==n.color}function ff(e,t){const s=e.pieces.get(t);return!!s&&e.draggable.enabled&&(e.movable.color==="both"||e.movable.color===s.color&&(e.turnColor===s.color||e.premovable.enabled))}function uf(e){const t=e.premovable.current;if(!t)return!1;const s=t[0],n=t[1];let o=!1;if(ro(e,s,n)){const r=Ii(e,s,n);if(r){const i={premove:!0};r!==!0&&(i.captured=r),ye(e.movable.events.after,s,n,i),o=!0}}return pt(e),o}function hf(e,t){const s=e.predroppable.current;let n=!1;if(!s)return!1;if(t(s)){const o={role:s.role,color:e.movable.color};oo(e,o,s.key)&&(ye(e.movable.events.afterNewPiece,s.role,s.key,{premove:!1,predrop:!0}),n=!0)}return gt(e),n}function lo(e){pt(e),gt(e),Ie(e)}function er(e){e.movable.color=e.movable.dests=e.animation.current=void 0,lo(e)}function At(e,t,s){let n=Math.floor(8*(e[0]-s.left)/s.width);t||(n=7-n);let o=7-Math.floor(8*(e[1]-s.top)/s.height);return t||(o=7-o),n>=0&&n<8&&o>=0&&o<8?Te([n,o]):void 0}function df(e,t,s,n){const o=ee(e),r=Si.filter(a=>Ti(o[0],o[1],a[0],a[1])||ki(o[0],o[1],a[0],a[1])),i=r.map(a=>Ei(Te(a),s,n)).map(a=>fs(t,a)),[,l]=i.reduce((a,c,f)=>a[0]<c?a:[c,f],[i[0],0]);return Te(r[l])}const we=e=>e.orientation==="white",Fi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",pf={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},gf={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function Ki(e){e==="start"&&(e=Fi);const t=new Map;let s=7,n=0;for(const o of e)switch(o){case" ":case"[":return t;case"/":if(--s,s<0)return t;n=0;break;case"~":{const r=t.get(Te([n-1,s]));r&&(r.promoted=!0);break}default:{const r=o.charCodeAt(0);if(r<57)n+=r-48;else{const i=o.toLowerCase();t.set(Te([n,s]),{role:pf[i],color:o===i?"black":"white"}),++n}}}return t}function mf(e){return Qc.map(t=>Xn.map(s=>{const n=e.get(s+t);if(n){let o=gf[n.role];return n.color==="white"&&(o=o.toUpperCase()),n.promoted&&(o+="~"),o}else return"1"}).join("")).join("/").replace(/1{2,}/g,t=>t.length.toString())}function qi(e,t){t.animation&&(ao(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function $i(e,t){var s,n,o;if(!((s=t.movable)===null||s===void 0)&&s.dests&&(e.movable.dests=void 0),!((n=t.drawable)===null||n===void 0)&&n.autoShapes&&(e.drawable.autoShapes=[]),ao(e,t),t.fen&&(e.pieces=Ki(t.fen),e.drawable.shapes=((o=t.drawable)===null||o===void 0?void 0:o.shapes)||[]),"check"in t&&sf(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&Di(e,e.selected),qi(e,t),!e.movable.rookCastle&&e.movable.dests){const r=e.movable.color==="white"?"1":"8",i="e"+r,l=e.movable.dests.get(i),a=e.pieces.get(i);if(!l||!a||a.role!=="king")return;e.movable.dests.set(i,l.filter(c=>!(c==="a"+r&&l.includes("c"+r))&&!(c==="h"+r&&l.includes("g"+r))))}}function ao(e,t){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(Object.prototype.hasOwnProperty.call(e,s)&&tr(e[s])&&tr(t[s])?ao(e[s],t[s]):e[s]=t[s])}function tr(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}const wt=(e,t)=>t.animation.enabled?_f(e,t):it(e,t);function it(e,t){const s=e(t);return t.dom.redraw(),s}const mn=(e,t)=>({key:e,pos:ee(e),piece:t}),bf=(e,t)=>t.sort((s,n)=>fs(e.pos,s.pos)-fs(e.pos,n.pos))[0];function vf(e,t){const s=new Map,n=[],o=new Map,r=[],i=[],l=new Map;let a,c,f;for(const[d,p]of e)l.set(d,mn(d,p));for(const d of to)a=t.pieces.get(d),c=l.get(d),a?c?On(a,c.piece)||(r.push(c),i.push(mn(d,a))):i.push(mn(d,a)):c&&r.push(c);for(const d of i)c=bf(d,r.filter(p=>On(d.piece,p.piece))),c&&(f=[c.pos[0]-d.pos[0],c.pos[1]-d.pos[1]],s.set(d.key,f.concat(f)),n.push(c.key));for(const d of r)n.includes(d.key)||o.set(d.key,d.piece);return{anims:s,fadings:o}}function ji(e,t){const s=e.animation.current;if(s===void 0){e.dom.destroyed||e.dom.redrawNow();return}const n=1-(t-s.start)*s.frequency;if(n<=0)e.animation.current=void 0,e.dom.redrawNow();else{const o=yf(n);for(const r of s.plan.anims.values())r[2]=r[0]*o,r[3]=r[1]*o;e.dom.redrawNow(!0),requestAnimationFrame((r=performance.now())=>ji(e,r))}}function _f(e,t){const s=new Map(t.pieces),n=e(t),o=vf(s,t);if(o.anims.size||o.fadings.size){const r=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:o},r||ji(t,performance.now())}else t.dom.redraw();return n}const yf=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,wf=["green","red","blue","yellow"];function Sf(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?Ie(e):lo(e);const s=Tt(t),n=At(s,we(e),e.dom.bounds());n&&(e.drawable.current={orig:n,pos:s,brush:kf(t),snapToValidMove:e.drawable.defaultSnapToValidMove},Hi(e))}function Hi(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const s=At(t.pos,we(e),e.dom.bounds());s||(t.snapToValidMove=!1);const n=t.snapToValidMove?df(t.orig,t.pos,we(e),e.dom.bounds()):s;n!==t.mouseSq&&(t.mouseSq=n,t.dest=n!==t.orig?n:void 0,e.dom.redrawNow()),Hi(e)}})}function Cf(e,t){e.drawable.current&&(e.drawable.current.pos=Tt(t))}function xf(e){const t=e.drawable.current;t&&(t.mouseSq&&Pf(e.drawable,t),Vi(e))}function Vi(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function Ef(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),Bi(e.drawable))}function kf(e){var t;const s=(e.shiftKey||e.ctrlKey)&&xi(e),n=e.altKey||e.metaKey||((t=e.getModifierState)===null||t===void 0?void 0:t.call(e,"AltGraph"));return wf[(s?1:0)+(n?2:0)]}function Pf(e,t){const s=o=>o.orig===t.orig&&o.dest===t.dest,n=e.shapes.find(s);n&&(e.shapes=e.shapes.filter(o=>!s(o))),(!n||n.brush!==t.brush)&&e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),Bi(e)}function Bi(e){e.onChange&&e.onChange(e.shapes)}function Mf(e,t){if(!(e.trustAllEvents||t.isTrusted)||t.button!==void 0&&t.button!==0||t.touches&&t.touches.length>1)return;const s=e.dom.bounds(),n=Tt(t),o=At(n,we(e),s);if(!o)return;const r=e.pieces.get(o),i=e.selected;if(!i&&e.drawable.enabled&&(e.drawable.eraseOnClick||!r||r.color!==e.turnColor)&&Ef(e),t.cancelable!==!1&&(!t.touches||e.blockTouchScroll||r||i||Tf(e,n)))t.preventDefault();else if(t.touches)return;const l=!!e.premovable.current,a=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&ro(e,e.selected,o)?wt(d=>In(d,o),e):In(e,o);const c=e.selected===o,f=Ui(e,o);if(r&&f&&c&&ff(e,o)){e.draggable.current={orig:o,piece:r,origPos:n,pos:n,started:e.draggable.autoDistance&&e.stats.dragged,element:f,previouslySelected:i,originTarget:t.target,keyHasChanged:!1},f.cgDragging=!0,f.classList.add("dragging");const d=e.dom.elements.ghost;d&&(d.className=`ghost ${r.color} ${r.role}`,He(d,gs(s)(ee(o),we(e))),no(d,!0)),co(e)}else l&&pt(e),a&&gt(e);e.dom.redraw()}function Tf(e,t){const s=we(e),n=e.dom.bounds(),o=Math.pow(n.width/8,2);for(const r of e.pieces.keys()){const i=Ei(r,s,n);if(fs(i,t)<=o)return!0}return!1}function Af(e,t,s,n){e.pieces.set("a0",t),e.dom.redraw();const r=Tt(s);e.draggable.current={orig:"a0",piece:t,origPos:r,pos:r,started:!0,element:()=>Ui(e,"a0"),originTarget:s.target,newPiece:!0,force:!!n,keyHasChanged:!1},co(e)}function co(e){requestAnimationFrame(()=>{var t;const s=e.draggable.current;if(!s)return;!((t=e.animation.current)===null||t===void 0)&&t.plan.anims.has(s.orig)&&(e.animation.current=void 0);const n=e.pieces.get(s.orig);if(!n||!On(n,s.piece))qs(e);else if(!s.started&&fs(s.pos,s.origPos)>=Math.pow(e.draggable.distance,2)&&(s.started=!0),s.started){if(typeof s.element=="function"){const r=s.element();if(!r)return;r.cgDragging=!0,r.classList.add("dragging"),s.element=r}const o=e.dom.bounds();He(s.element,[s.pos[0]-o.left-o.width/16,s.pos[1]-o.top-o.height/16]),s.keyHasChanged||(s.keyHasChanged=s.orig!==At(s.pos,we(e),o))}co(e)})}function Of(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=Tt(t))}function If(e,t){const s=e.draggable.current;if(!s)return;if(t.type==="touchend"&&t.cancelable!==!1&&t.preventDefault(),t.type==="touchend"&&s.originTarget!==t.target&&!s.newPiece){e.draggable.current=void 0;return}pt(e),gt(e);const n=Tt(t)||s.pos,o=At(n,we(e),e.dom.bounds());o&&s.started&&s.orig!==o?s.newPiece?Ni(e,s.orig,o,s.force):(e.stats.ctrlKey=t.ctrlKey,Ri(e,s.orig,o)&&(e.stats.dragged=!0)):s.newPiece?e.pieces.delete(s.orig):e.draggable.deleteOnDropOff&&!o&&(e.pieces.delete(s.orig),ye(e.events.change)),(s.orig===s.previouslySelected||s.keyHasChanged)&&(s.orig===o||!o)?Ie(e):e.selectable.enabled||Ie(e),Wi(e),e.draggable.current=void 0,e.dom.redraw()}function qs(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,Ie(e),Wi(e),e.dom.redraw())}function Wi(e){const t=e.dom.elements;t.ghost&&no(t.ghost,!1)}function Ui(e,t){let s=e.dom.elements.board.firstChild;for(;s;){if(s.cgKey===t&&s.tagName==="PIECE")return s;s=s.nextSibling}}function Rf(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{sr(e,2),setTimeout(()=>sr(e,void 0),120)},120)}function sr(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function Nf(e,t){function s(){ef(e),t()}return{set(n){n.orientation&&n.orientation!==e.orientation&&s(),qi(e,n),(n.fen?wt:it)(o=>$i(o,n),e)},state:e,getFen:()=>mf(e.pieces),toggleOrientation:s,setPieces(n){wt(o=>tf(o,n),e)},selectSquare(n,o){n?wt(r=>In(r,n,o),e):e.selected&&(Ie(e),e.dom.redraw())},move(n,o){wt(r=>Oi(r,n,o),e)},newPiece(n,o){wt(r=>oo(r,n,o),e)},playPremove(){if(e.premovable.current){if(wt(uf,e))return!0;e.dom.redraw()}return!1},playPredrop(n){if(e.predroppable.current){const o=hf(e,n);return e.dom.redraw(),o}return!1},cancelPremove(){it(pt,e)},cancelPredrop(){it(gt,e)},cancelMove(){it(n=>{lo(n),qs(n)},e)},stop(){it(n=>{er(n),qs(n)},e)},explode(n){Rf(e,n)},setAutoShapes(n){it(o=>o.drawable.autoShapes=n,e)},setShapes(n){it(o=>o.drawable.shapes=n,e)},getKeyAtDomPos(n){return At(n,we(e),e.dom.bounds())},redrawAll:t,dragNewPiece(n,o,r){Af(e,n,o,r)},destroy(){er(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function Df(){return{pieces:Ki(Fi),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purp",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},hilite:{key:"hilite",color:"#fff",opacity:1,lineWidth:1}},prevSvgHash:""},hold:Yc()}}function Lf(){const e=oe("defs"),t=me(oe("filter"),{id:"cg-filter-blur"});return t.appendChild(me(oe("feGaussianBlur"),{stdDeviation:"0.022"})),e.appendChild(t),e}function Ff(e,t,s){var n;const o=e.drawable,r=o.current,i=r&&r.mouseSq?r:void 0,l=new Map,a=e.dom.bounds(),c=o.autoShapes.filter(g=>!g.piece);for(const g of o.shapes.concat(c).concat(i?[i]:[])){if(!g.dest)continue;const b=(n=l.get(g.dest))!==null&&n!==void 0?n:new Set,v=js($s(ee(g.orig),e.orientation),a),A=js($s(ee(g.dest),e.orientation),a);b.add(Nn(v,A)),l.set(g.dest,b)}const f=o.shapes.concat(c).map(g=>({shape:g,current:!1,hash:nr(g,Rn(g.dest,l),!1,a)}));i&&f.push({shape:i,current:!0,hash:nr(i,Rn(i.dest,l),!0,a)});const d=f.map(g=>g.hash).join(";");if(d===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=d;const p=t.querySelector("defs");Kf(o,f,p),qf(f,t.querySelector("g"),s.querySelector("g"),g=>Hf(e,g,o.brushes,l,a))}function Kf(e,t,s){var n;const o=new Map;let r;for(const a of t.filter(c=>c.shape.dest&&c.shape.brush))r=Gi(e.brushes[a.shape.brush],a.shape.modifiers),!((n=a.shape.modifiers)===null||n===void 0)&&n.hilite&&o.set("hilite",e.brushes.hilite),o.set(r.key,r);const i=new Set;let l=s.firstElementChild;for(;l;)i.add(l.getAttribute("cgKey")),l=l.nextElementSibling;for(const[a,c]of o.entries())i.has(a)||s.appendChild(Wf(c))}function qf(e,t,s,n){const o=new Map;for(const r of e)o.set(r.hash,!1);for(const r of[t,s]){const i=[];let l=r.firstElementChild,a;for(;l;)a=l.getAttribute("cgHash"),o.has(a)?o.set(a,!0):i.push(l),l=l.nextElementSibling;for(const c of i)r.removeChild(c)}for(const r of e.filter(i=>!o.get(i.hash)))for(const i of n(r))i.isCustom?s.appendChild(i.el):t.appendChild(i.el)}function nr({orig:e,dest:t,brush:s,piece:n,modifiers:o,customSvg:r,label:i},l,a,c){var f,d;return[c.width,c.height,a,e,t,s,l&&"-",n&&$f(n),o&&jf(o),r&&`custom-${or(r.html)},${(d=(f=r.center)===null||f===void 0?void 0:f[0])!==null&&d!==void 0?d:"o"}`,i&&`label-${or(i.text)}`].filter(p=>p).join(",")}function $f(e){return[e.color,e.role,e.scale].filter(t=>t).join(",")}function jf(e){return[e.lineWidth,e.hilite&&"*"].filter(t=>t).join(",")}function or(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s)>>>0;return t.toString()}function Hf(e,{shape:t,current:s,hash:n},o,r,i){var l,a;const c=js($s(ee(t.orig),e.orientation),i),f=t.dest?js($s(ee(t.dest),e.orientation),i):c,d=t.brush&&Gi(o[t.brush],t.modifiers),p=r.get(t.dest),g=[];if(d){const b=me(oe("g"),{cgHash:n});g.push({el:b}),c[0]!==f[0]||c[1]!==f[1]?b.appendChild(Bf(t,d,c,f,s,Rn(t.dest,r))):b.appendChild(Vf(o[t.brush],c,s,i))}if(t.label){const b=t.label;(l=b.fill)!==null&&l!==void 0||(b.fill=t.brush&&o[t.brush].color);const v=t.brush?void 0:"tr";g.push({el:Uf(b,n,c,f,p,v),isCustom:!0})}if(t.customSvg){const b=(a=t.customSvg.center)!==null&&a!==void 0?a:"orig",[v,A]=b==="label"?zi(c,f,p).map(C=>C-.5):b==="dest"?f:c,E=me(oe("g"),{transform:`translate(${v},${A})`,cgHash:n});E.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,g.push({el:E,isCustom:!0})}return g}function Vf(e,t,s,n){const o=Gf(),r=(n.width+n.height)/(4*Math.max(n.width,n.height));return me(oe("circle"),{stroke:e.color,"stroke-width":o[s?0:1],fill:"none",opacity:Qi(e,s),cx:t[0],cy:t[1],r:r-o[1]/2})}function Bf(e,t,s,n,o,r){var i;function l(f){var d;const p=zf(r&&!o),g=n[0]-s[0],b=n[1]-s[1],v=Math.atan2(b,g),A=Math.cos(v)*p,E=Math.sin(v)*p;return me(oe("line"),{stroke:f?"white":t.color,"stroke-width":Qf(t,o)+(f?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${f?"hilite":t.key})`,opacity:!((d=e.modifiers)===null||d===void 0)&&d.hilite?1:Qi(t,o),x1:s[0],y1:s[1],x2:n[0]-A,y2:n[1]-E})}if(!(!((i=e.modifiers)===null||i===void 0)&&i.hilite))return l(!1);const a=oe("g"),c=me(oe("g"),{filter:"url(#cg-filter-blur)"});return c.appendChild(Yf(s,n)),c.appendChild(l(!0)),a.appendChild(c),a.appendChild(l(!1)),a}function Wf(e){const t=me(oe("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key==="hilite"?1.86:2.05,refY:2});return t.appendChild(me(oe("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function Uf(e,t,s,n,o,r){var i;const l=.4*.75**e.text.length,a=zi(s,n,o),c=r==="tr"?.4:0,f=me(oe("g"),{transform:`translate(${a[0]+c},${a[1]-c})`,cgHash:t});f.appendChild(me(oe("circle"),{r:.4/2,"fill-opacity":r?1:.8,"stroke-opacity":r?1:.7,"stroke-width":.03,fill:(i=e.fill)!==null&&i!==void 0?i:"#666",stroke:"white"}));const d=me(oe("text"),{"font-size":l,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return d.innerHTML=e.text,f.appendChild(d),f}function $s(e,t){return t==="white"?e:[7-e[0],7-e[1]]}function Rn(e,t){return(e&&t.has(e)&&t.get(e).size>1)===!0}function oe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function me(e,t){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.setAttribute(s,t[s]);return e}function Gi(e,t){return t?{color:e.color,opacity:Math.round(e.opacity*10)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(s=>s).join("")}:e}function Gf(){return[3/64,4/64]}function Qf(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function Qi(e,t){return(e.opacity||1)*(t?.9:1)}function zf(e){return(e?20:10)/64}function js(e,t){const s=Math.min(1,t.width/t.height),n=Math.min(1,t.height/t.width);return[(e[0]-3.5)*s,(3.5-e[1])*n]}function Yf(e,t){const s={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return me(oe("rect"),{x:s.from[0],y:s.from[1],width:s.to[0]-s.from[0],height:s.to[1]-s.from[1],fill:"none",stroke:"none"})}function Nn(e,t,s=!0){const n=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return s?(Math.round(n*8/Math.PI)+16)%16:n}function Jf(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((s,n)=>s+n*n,0))}function zi(e,t,s){let n=Jf(e,t);const o=Nn(e,t,!1);if(s&&(n-=33/64,s.size>1)){n-=10/64;const r=Nn(e,t);(s.has((r+1)%16)||s.has((r+15)%16))&&r&1&&(n-=.4)}return[e[0]-Math.cos(o)*n,e[1]-Math.sin(o)*n].map(r=>r+.5)}function Zf(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const a of Gc)e.classList.toggle("orientation-"+a,t.orientation===a);e.classList.toggle("manipulable",!t.viewOnly);const s=Xe("cg-container");e.appendChild(s);const n=Xe("cg-board");s.appendChild(n);let o,r,i;if(t.drawable.visible&&(o=me(oe("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),o.appendChild(Lf()),o.appendChild(oe("g")),r=me(oe("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),r.appendChild(oe("g")),i=Xe("cg-auto-pieces"),s.appendChild(o),s.appendChild(r),s.appendChild(i)),t.coordinates){const a=t.orientation==="black"?" black":"",c=t.ranksPosition==="left"?" left":"";s.appendChild(rr(eo,"ranks"+a+c)),s.appendChild(rr(Xn,"files"+a))}let l;return t.draggable.enabled&&t.draggable.showGhost&&(l=Xe("piece","ghost"),no(l,!1),s.appendChild(l)),{board:n,container:s,wrap:e,ghost:l,svg:o,customSvg:r,autoPieces:i}}function rr(e,t){const s=Xe("coords",t);let n;for(const o of e)n=Xe("coord"),n.textContent=o,s.appendChild(n);return s}function Xf(e,t){if(!e.dropmode.active)return;pt(e),gt(e);const s=e.dropmode.piece;if(s){e.pieces.set("a0",s);const n=Tt(t),o=n&&At(n,we(e),e.dom.bounds());o&&Ni(e,"a0",o)}e.dom.redraw()}function eu(e,t){const s=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&s.addEventListener("contextmenu",o=>o.preventDefault()),e.viewOnly)return;const n=su(e);s.addEventListener("touchstart",n,{passive:!1}),s.addEventListener("mousedown",n,{passive:!1})}function tu(e,t){const s=[];if("ResizeObserver"in window||s.push(Wt(document.body,"chessground.resize",t)),!e.viewOnly){const n=ir(e,Of,Cf),o=ir(e,If,xf);for(const i of["touchmove","mousemove"])s.push(Wt(document,i,n));for(const i of["touchend","mouseup"])s.push(Wt(document,i,o));const r=()=>e.dom.bounds.clear();s.push(Wt(document,"scroll",r,{capture:!0,passive:!0})),s.push(Wt(window,"resize",r,{passive:!0}))}return()=>s.forEach(n=>n())}function Wt(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}const su=e=>t=>{e.draggable.current?qs(e):e.drawable.current?Vi(e):t.shiftKey||xi(t)?e.drawable.enabled&&Sf(e,t):e.viewOnly||(e.dropmode.active?Xf(e,t):Mf(e,t))},ir=(e,t,s)=>n=>{e.drawable.current?e.drawable.enabled&&s(e,n):e.viewOnly||t(e,n)};function nu(e){const t=we(e),s=gs(e.dom.bounds()),n=e.dom.elements.board,o=e.pieces,r=e.animation.current,i=r?r.plan.anims:new Map,l=r?r.plan.fadings:new Map,a=e.draggable.current,c=ru(e),f=new Set,d=new Set,p=new Map,g=new Map;let b,v,A,E,C,D,T,j,le,F;for(v=n.firstChild;v;){if(b=v.cgKey,Yi(v))if(A=o.get(b),C=i.get(b),D=l.get(b),E=v.cgPiece,v.cgDragging&&(!a||a.orig!==b)&&(v.classList.remove("dragging"),He(v,s(ee(b),t)),v.cgDragging=!1),!D&&v.cgFading&&(v.cgFading=!1,v.classList.remove("fading")),A){if(C&&v.cgAnimating&&E===Ut(A)){const O=ee(b);O[0]+=C[2],O[1]+=C[3],v.classList.add("anim"),He(v,s(O,t))}else v.cgAnimating&&(v.cgAnimating=!1,v.classList.remove("anim"),He(v,s(ee(b),t)),e.addPieceZIndex&&(v.style.zIndex=bn(ee(b),t)));E===Ut(A)&&(!D||!v.cgFading)?f.add(b):D&&E===Ut(D)?(v.classList.add("fading"),v.cgFading=!0):vn(p,E,v)}else vn(p,E,v);else if(Ji(v)){const O=v.className;c.get(b)===O?d.add(b):vn(g,O,v)}v=v.nextSibling}for(const[O,U]of c)if(!d.has(O)){le=g.get(U),F=le&&le.pop();const Z=s(ee(O),t);if(F)F.cgKey=O,He(F,Z);else{const se=Xe("square",U);se.cgKey=O,He(se,Z),n.insertBefore(se,n.firstChild)}}for(const[O,U]of o)if(C=i.get(O),!f.has(O))if(T=p.get(Ut(U)),j=T&&T.pop(),j){j.cgKey=O,j.cgFading&&(j.classList.remove("fading"),j.cgFading=!1);const Z=ee(O);e.addPieceZIndex&&(j.style.zIndex=bn(Z,t)),C&&(j.cgAnimating=!0,j.classList.add("anim"),Z[0]+=C[2],Z[1]+=C[3]),He(j,s(Z,t))}else{const Z=Ut(U),se=Xe("piece",Z),Pe=ee(O);se.cgPiece=Z,se.cgKey=O,C&&(se.cgAnimating=!0,Pe[0]+=C[2],Pe[1]+=C[3]),He(se,s(Pe,t)),e.addPieceZIndex&&(se.style.zIndex=bn(Pe,t)),n.appendChild(se)}for(const O of p.values())ar(e,O);for(const O of g.values())ar(e,O)}function ou(e){const t=we(e),s=gs(e.dom.bounds());let n=e.dom.elements.board.firstChild;for(;n;)(Yi(n)&&!n.cgAnimating||Ji(n))&&He(n,s(ee(n.cgKey),t)),n=n.nextSibling}function lr(e){var t,s;const n=e.dom.elements.wrap.getBoundingClientRect(),o=e.dom.elements.container,r=n.height/n.width,i=Math.floor(n.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,l=i*r;o.style.width=i+"px",o.style.height=l+"px",e.dom.bounds.clear(),(t=e.addDimensionsCssVarsTo)===null||t===void 0||t.style.setProperty("--cg-width",i+"px"),(s=e.addDimensionsCssVarsTo)===null||s===void 0||s.style.setProperty("--cg-height",l+"px")}const Yi=e=>e.tagName==="PIECE",Ji=e=>e.tagName==="SQUARE";function ar(e,t){for(const s of t)e.dom.elements.board.removeChild(s)}function bn(e,t){const s=e[1];return`${t?10-s:3+s}`}const Ut=e=>`${e.color} ${e.role}`;function ru(e){var t,s,n;const o=new Map;if(e.lastMove&&e.highlight.lastMove)for(const l of e.lastMove)ze(o,l,"last-move");if(e.check&&e.highlight.check&&ze(o,e.check,"check"),e.selected&&(ze(o,e.selected,"selected"),e.movable.showDests)){const l=(t=e.movable.dests)===null||t===void 0?void 0:t.get(e.selected);if(l)for(const c of l)ze(o,c,"move-dest"+(e.pieces.has(c)?" oc":""));const a=(n=(s=e.premovable.customDests)===null||s===void 0?void 0:s.get(e.selected))!==null&&n!==void 0?n:e.premovable.dests;if(a)for(const c of a)ze(o,c,"premove-dest"+(e.pieces.has(c)?" oc":""))}const r=e.premovable.current;if(r)for(const l of r)ze(o,l,"current-premove");else e.predroppable.current&&ze(o,e.predroppable.current.key,"current-premove");const i=e.exploding;if(i)for(const l of i.keys)ze(o,l,"exploding"+i.stage);return e.highlight.custom&&e.highlight.custom.forEach((l,a)=>{ze(o,a,l)}),o}function ze(e,t,s){const n=e.get(t);n?e.set(t,`${n} ${s}`):e.set(t,s)}function vn(e,t,s){const n=e.get(t);n?n.push(s):e.set(t,[s])}function iu(e,t,s){const n=new Map,o=[];for(const l of e)n.set(l.hash,!1);let r=t.firstElementChild,i;for(;r;)i=r.getAttribute("cgHash"),n.has(i)?n.set(i,!0):o.push(r),r=r.nextElementSibling;for(const l of o)t.removeChild(l);for(const l of e)n.get(l.hash)||t.appendChild(s(l))}function lu(e,t){const s=e.drawable.autoShapes.filter(n=>n.piece).map(n=>({shape:n,hash:fu(n),current:!1}));iu(s,t,n=>cu(e,n,e.dom.bounds()))}function au(e){var t;const s=we(e),n=gs(e.dom.bounds());let o=(t=e.dom.elements.autoPieces)===null||t===void 0?void 0:t.firstChild;for(;o;)Ci(o,n(ee(o.cgKey),s),o.cgScale),o=o.nextSibling}function cu(e,{shape:t,hash:s},n){var o,r,i;const l=t.orig,a=(o=t.piece)===null||o===void 0?void 0:o.role,c=(r=t.piece)===null||r===void 0?void 0:r.color,f=(i=t.piece)===null||i===void 0?void 0:i.scale,d=Xe("piece",`${a} ${c}`);return d.setAttribute("cgHash",s),d.cgKey=l,d.cgScale=f,Ci(d,gs(n)(ee(l),we(e)),f),d}const fu=e=>{var t,s,n;return[e.orig,(t=e.piece)===null||t===void 0?void 0:t.role,(s=e.piece)===null||s===void 0?void 0:s.color,(n=e.piece)===null||n===void 0?void 0:n.scale].join(",")};function uu(e,t){const s=Df();$i(s,{});function n(){const o="dom"in s?s.dom.unbind:void 0,r=Zf(e,s),i=zc(()=>r.board.getBoundingClientRect()),l=f=>{nu(c),r.autoPieces&&lu(c,r.autoPieces),!f&&r.svg&&Ff(c,r.svg,r.customSvg)},a=()=>{lr(c),ou(c),r.autoPieces&&au(c)},c=s;return c.dom={elements:r,bounds:i,redraw:hu(l),redrawNow:l,unbind:o},c.drawable.prevSvgHash="",lr(c),l(!1),eu(c,a),o||(c.dom.unbind=tu(c,a)),c.events.insert&&c.events.insert(r),c}return Nf(n(),n)}function hu(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}class du{game;board;boardState;props;emit;constructor(t,s,n,o){this.boardState=s,this.props=n,this.emit=o,this.game=new $c,this.board=uu(t),this.resetBoard()}updateGameState({updateFen:t=!0}={}){this.boardState.historyViewerState.isEnabled||(t&&this.board.set({fen:this.game.fen()}),this.board.state.turnColor=this.getTurnColor(),this.board.state.movable.free?(this.board.state.movable.color="both",this.board.state.movable.dests=new Map):(this.board.state.movable.color=this.props.playerColor||this.board.state.turnColor,this.board.state.movable.dests=Xo(this.game)),this.displayInCheck(this.game.inCheck(),this.board.state.turnColor),this.boardState.showThreats&&this.drawMoves()),this.emitEvents()}displayInCheck(t,s){if(t){for(const[n,o]of this.board.state.pieces)if(o.role==="king"&&o.color===s){this.board.state.check=n;return}}else this.board.state.check=void 0}emitEvents(){this.game.inCheck()&&this.emit(this.game.isCheckmate()?"checkmate":"check",this.board.state.turnColor),this.game.isDraw()&&this.emit("draw"),this.game.isStalemate()&&this.emit("stalemate")}async changeTurn(t,s,n){let o;Hc(s,this.game.get(t))&&(o=await new Promise(r=>{this.boardState.promotionDialogState={isEnabled:!0,color:this.getTurnColor(),callback:r}})),this.move({from:t,to:s,promotion:o})}resetBoard(){this.setConfig(this.props.boardConfig,!0)}undoLastMove(){const t=this.game.undo();if(t!=null&&(this.boardState.historyViewerState.isEnabled&&this.boardState.historyViewerState.plyViewing===this.getCurrentPlyNumber()&&this.stopViewingHistory(),!this.boardState.historyViewerState.isEnabled)){this.board.set({fen:t.before}),this.updateGameState({updateFen:!1});const s=this.getLastMove();this.board.state.lastMove=s?[s?.from,s?.to]:void 0}}getMaterialCount(){const t=this.board.state.pieces,s={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:0},n={materialWhite:0,materialBlack:0,materialDiff:0};for(const o of t)o[1].color==="white"?n.materialWhite+=s[o[1].role]:n.materialBlack+=s[o[1].role];return n.materialDiff=n.materialWhite-n.materialBlack,n}getCapturedPieces(){const t={white:[],black:[]};for(const{color:s,captured:n}of this.getHistory(!0))n&&t[Cs(s)].push(n);return t}toggleOrientation(){this.board.toggleOrientation()}drawMoves(){this.boardState.showThreats=!0,this.board.setShapes(jc(this.game.moves({verbose:!0})))}hideMoves(){this.boardState.showThreats=!1,this.board.setShapes([])}drawMove(t,s,n){this.board.setShapes([{orig:t,dest:s,brush:n}])}toggleMoves(){this.boardState.showThreats?this.hideMoves():this.drawMoves()}async getOpeningName(){try{const t=this.game.history({verbose:!0}).map(s=>s.lan).join(",");return(await(await fetch(`https://explorer.lichess.ovh/masters?play=${t}`)).json()).opening?.name??null}catch{return null}}move(t){let s;try{s=this.game.move(t)}catch{return typeof t=="object"&&this.board.state.movable.free&&(this.board.move(t.from,t.to),this.updateGameState({updateFen:!1})),!1}return this.emit("move",s),s?.promotion&&this.emit("promotion",{color:Cs(s.color),promotedTo:s.promotion.toUpperCase(),sanMove:s.san}),this.boardState.historyViewerState.isEnabled||(this.board.move(s.from,s.to),(s.flags==="e"||s?.promotion)&&setTimeout(()=>this.board.set({fen:s.after}),this.board.state.animation.current?this.board.state.animation.duration:0),this.updateGameState({updateFen:!1}),Gn(this.board.playPremove)),!0}getTurnColor(){return Cs(this.game.turn())}getPossibleMoves(){return Xo(this.game)}getCurrentTurnNumber(){return this.game.moveNumber()}getCurrentPlyNumber(){return 2*this.getCurrentTurnNumber()-(this.getTurnColor()==="black"?1:2)}getLastMove(){return this.game.history({verbose:!0}).at(-1)}getHistory(t=!1){return this.game.history({verbose:t})}getFen(){return this.game.fen()}getBoardPosition(){return this.game.board()}getPgn(){return this.game.pgn()}getIsGameOver(){return this.game.isGameOver()}getIsCheckmate(){return this.game.isCheckmate()}getIsCheck(){return this.game.isCheck()}getIsStalemate(){return this.game.isStalemate()}getIsDraw(){return this.game.isDraw()}getIsThreefoldRepetition(){return this.game.isThreefoldRepetition()}getIsInsufficientMaterial(){return this.game.isInsufficientMaterial()}getSquareColor(t){return this.game.squareColor(t)}getSquare(t){return this.game.get(t)}setPosition(t){this.game.load(t),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState()}putPiece(t,s){if(this.board.state.movable.free){const n=this.board.state.pieces;return n.set(s,{color:t.color==="w"?"white":"black",role:Vc[t.type]}),this.board.setPieces(n),!0}else{const n=this.game.put(t,s);return n&&this.updateGameState(),n}}removePiece(t){this.board.state.pieces.delete(t),this.game.remove(t)}clearBoard(){this.game.clear(),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState()}setShapes(t){this.board.setShapes(t)}loadPgn(t){this.game.loadPgn(t),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState();const s=this.getLastMove();s&&this.board.set({lastMove:[s.from,s.to]})}getPgnInfo(){return this.game.header()}setPgnInfo(t){return this.game.header(...Object.entries(t).flat())}setConfig(t,s=!1){if(s&&(t=yi(Uc,t),this.board.state.selected=void 0),t.movable?.events&&"after"in t.movable.events){const r=t.movable.events.after;t.movable.events.after=r?async(...i)=>{await this.changeTurn(...i),r(...i)}:this.changeTurn.bind(this)}const{fen:n,...o}=t;this.board.set(o),n&&this.setPosition(n),this.board.redrawAll()}viewHistory(t){const s=this.getHistory(!0);if(t<0||t>s.length)return;const n=this.board.state.animation.enabled&&(this.boardState.historyViewerState.isEnabled&&Math.abs(this.boardState.historyViewerState.plyViewing-t)!==1||!this.boardState.historyViewerState.isEnabled&&t!==s.length-1);if(n&&this.board.set({animation:{enabled:!1}}),t<s.length)this.boardState.historyViewerState.isEnabled?this.boardState.historyViewerState.plyViewing=t:this.boardState.historyViewerState={isEnabled:!0,plyViewing:t,viewOnly:this.board.state.viewOnly},this.board.set({fen:s[t].before,viewOnly:!0,lastMove:t>0?[s[t-1].from,s[t-1].to]:void 0,selected:void 0}),this.displayInCheck(t>0?"+#".includes(s[t-1].san.at(-1)):!1,Cs(s[t].color)),this.board.cancelPremove();else if(this.boardState.historyViewerState.isEnabled){const o=s.at(-1);this.board.set({fen:o.after,viewOnly:this.boardState.historyViewerState.viewOnly,lastMove:[o.from,o.to]}),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState({updateFen:!1})}n&&this.board.set({animation:{enabled:!0}})}stopViewingHistory(){this.boardState.historyViewerState.isEnabled&&this.viewHistory(this.getCurrentPlyNumber())}viewStart(){this.viewHistory(0)}viewNext(){this.boardState.historyViewerState.isEnabled&&this.viewHistory(this.boardState.historyViewerState.plyViewing+1)}viewPrevious(){const t=this.boardState.historyViewerState.isEnabled?this.boardState.historyViewerState.plyViewing:this.getCurrentPlyNumber();this.viewHistory(t-1)}}const pu={class:"main-board"},gu=jr({__name:"TheChessboard",props:{boardConfig:{default:()=>({})},playerColor:{},reactiveConfig:{type:Boolean,default:!1}},emits:["boardCreated","check","checkmate","stalemate","draw","promotion","move"],setup(e,{emit:t}){const s=e,n=Es(null),o=Et({showThreats:!1,promotionDialogState:{isEnabled:!1},historyViewerState:{isEnabled:!1}});return Wr(()=>{if(n.value==null)throw new Error("vue3-chessboard: Failed to mount board.");const r=new du(n.value,o,s,t);if(t("boardCreated",r),s.reactiveConfig){let i=Ks(s.boardConfig);Ps(Et(s.boardConfig),l=>{r.setConfig(wi(i,l)),i=Ks(l)})}}),(r,i)=>(kt(),is("section",{class:hs(["main-wrap",{disabledBoard:o.promotionDialogState.isEnabled,viewingHistory:o.historyViewerState.isEnabled}])},[te("div",pu,[o.promotionDialogState.isEnabled?(kt(),hi(Ec,{key:0,state:o.promotionDialogState,onPromotionSelected:i[0]||(i[0]=l=>o.promotionDialogState={isEnabled:!1})},null,8,["state"])):$a("",!0),te("div",{ref_key:"boardElement",ref:n},null,512)])],2))}}),mu=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},bu={class:"app"},vu={class:"app-main"},_u={class:"controls"},yu={class:"controls-row"},wu=["value"],Su={class:"controls-row"},Cu={class:"board-wrapper"},xu={__name:"App",setup(e){const t=Es(null),s=Es(""),n=Es("w"),o=[{value:"k",label:"King"},{value:"q",label:"Queen"},{value:"r",label:"Rook"},{value:"b",label:"Bishop"},{value:"n",label:"Knight"},{value:"p",label:"Pawn"}];function r(A){return A[Math.floor(Math.random()*A.length)]}const i=["a","b","c","d","e","f","g","h"],l=["1","2"],a=["7","8"],c=r(i)+r(l),f=r(i)+r(a),d=Et({[c]:{color:"white",role:"king"},[f]:{color:"black",role:"king"}}),p=Et({fen:"4k3/8/8/8/8/8/8/4K3 w - - 0 1",coordinates:!0,viewOnly:!1,movable:{free:!1,color:"white",showDests:!1},selectable:{enabled:!0},draggable:{enabled:!1},highlight:{lastMove:!1,check:!1},events:{select:b}});function g(A){t.value=A;const E=v(d);t.value.setPosition(E)}function b(A){if(!t.value||!s.value||!n.value||!A||typeof A!="string")return;const C={k:"king",q:"queen",r:"rook",b:"bishop",n:"knight",p:"pawn"}[s.value];if(!C)return;const D=n.value==="w"?"white":"black";d[A]={color:D,role:C};const T=v(d);t.value.setPosition(T)}function v(A){const E=Array.from({length:8},()=>Array(8).fill(null)),C=F=>{if(!/^[a-h][1-8]$/.test(F))return null;const O=F.charCodeAt(0)-97;return[7-(parseInt(F[1],10)-1),O]},D=F=>{if(!F)return null;const O={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p"}[F.role];return O?F.color==="white"?O.toUpperCase():O:null};Object.entries(A).forEach(([F,O])=>{const U=C(F);if(!U)return;const[Z,se]=U,Pe=D(O);Pe&&(E[Z][se]=Pe)});const T=E.some(F=>F.includes("K")),j=E.some(F=>F.includes("k"));if(!T){const F=C("e1");if(F){const[O,U]=F;E[O][U]||(E[O][U]="K")}}if(!j){const F=C("e8");if(F){const[O,U]=F;E[O][U]||(E[O][U]="k")}}return`${E.map(F=>{let O="",U=0;for(let Z=0;Z<8;Z+=1){const se=F[Z];se?(U>0&&(O+=String(U),U=0),O+=se):U+=1}return U>0&&(O+=String(U)),O||"8"}).join("/")} w - - 0 1`}return(A,E)=>(kt(),is("div",bu,[E[7]||(E[7]=te("header",{class:"app-header"},[te("h1",null,"Custom Chess Variant  Placement Phase"),te("p",{class:"app-subtitle"}," Step 1.1: Click a piece and color above, then click a square on the board to place it. No rules are enforced yet. ")],-1)),te("main",vu,[te("section",_u,[te("div",yu,[E[3]||(E[3]=te("label",{class:"control-label",for:"piece-select"},"Piece:",-1)),So(te("select",{id:"piece-select","onUpdate:modelValue":E[0]||(E[0]=C=>s.value=C),class:"control-select"},[E[2]||(E[2]=te("option",{disabled:"",value:""},"-- choose a piece --",-1)),(kt(),is(Re,null,Gr(o,C=>te("option",{key:C.value,value:C.value},vr(C.label),9,wu)),64))],512),[[Go,s.value]])]),te("div",Su,[E[5]||(E[5]=te("label",{class:"control-label",for:"color-select"},"Color:",-1)),So(te("select",{id:"color-select","onUpdate:modelValue":E[1]||(E[1]=C=>n.value=C),class:"control-select"},[...E[4]||(E[4]=[te("option",{value:"w"},"White",-1),te("option",{value:"b"},"Black",-1)])],512),[[Go,n.value]])]),E[6]||(E[6]=te("p",{class:"hint"}," 1. Select a piece and color. 2. Click any square on the board to place that piece. 3. Clicking an occupied square overwrites the piece. ",-1))]),te("section",Cu,[We(Nr(gu),{"board-config":p,"reactive-config":"",onBoardCreated:g},null,8,["board-config"])])])]))}},Eu=mu(xu,[["__scopeId","data-v-05c77fe2"]]);yc(Eu).mount("#app");
